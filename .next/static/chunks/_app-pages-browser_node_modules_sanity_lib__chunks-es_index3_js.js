"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_sanity_lib__chunks-es_index3_js"],{

/***/ "(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":
/*!********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pairwise: function() { return /* binding */ pairwise; }\n/* harmony export */ });\n/* harmony import */ var _util_lift__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lift */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/util/lift.js\");\n/* harmony import */ var _OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorSubscriber */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js\");\n\n\nfunction pairwise() {\n    return (0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.operate)(function(source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.createOperatorSubscriber)(subscriber, function(value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([\n                p,\n                value\n            ]);\n            hasPrev = true;\n        }));\n    });\n} //# sourceMappingURL=pairwise.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvcGFpcndpc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3VDO0FBQ3lCO0FBNkMxRCxTQUFVRTtJQUNkLE9BQU9GLG1EQUFBQSxDQUFRLFNBQUNHLE1BQU0sRUFBRUMsVUFBVTtRQUNoQyxJQUFJQztRQUNKLElBQUlDLFVBQVU7UUFDZEgsT0FBT0ksU0FBUyxDQUNkTiw2RUFBQUEsQ0FBeUJHLFlBQVksU0FBQ0ksS0FBSztZQUN6QyxJQUFNQyxJQUFJSjtZQUNWQSxPQUFPRztZQUNQRixXQUFXRixXQUFXTSxJQUFJLENBQUM7Z0JBQUNEO2dCQUFHRDthQUFNO1lBQ3JDRixVQUFVO1FBQ1o7SUFFSjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi8uLi9zcmMvaW50ZXJuYWwvb3BlcmF0b3JzL3BhaXJ3aXNlLnRzP2FiNTQiXSwibmFtZXMiOlsib3BlcmF0ZSIsImNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciIsInBhaXJ3aXNlIiwic291cmNlIiwic3Vic2NyaWJlciIsInByZXYiLCJoYXNQcmV2Iiwic3Vic2NyaWJlIiwidmFsdWUiLCJwIiwibmV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/index3.js":
/*!******************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks-es/index3.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ StructureToolBoundary; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-compiler-runtime */ \"(app-pages-browser)/./node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sanity */ \"(app-pages-browser)/./node_modules/sanity/lib/index.js\");\n/* harmony import */ var _TooltipDelayGroupProvider_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./TooltipDelayGroupProvider.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/TooltipDelayGroupProvider.js\");\n/* harmony import */ var _pane_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./pane.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/pane.js\");\n/* harmony import */ var _StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./StructureToolProvider.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/StructureToolProvider.js\");\n/* harmony import */ var sanity_router__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! sanity/router */ \"(app-pages-browser)/./node_modules/sanity/lib/router.js\");\n/* harmony import */ var _singletons_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../_singletons.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_singletons.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/omit.js */ \"(app-pages-browser)/./node_modules/lodash/omit.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/util/isObservable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/never.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! nanoid */ \"(app-pages-browser)/./node_modules/nanoid/index.browser.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/publishReplay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/refCount.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var _sanity_uuid__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @sanity/uuid */ \"(app-pages-browser)/./node_modules/@sanity/uuid/node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _generate_help_url_esm_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./generate-help-url.esm.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/generate-help-url.esm.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @sanity/icons */ \"(app-pages-browser)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @sanity/ui */ \"(app-pages-browser)/./node_modules/@sanity/ui/dist/_chunks-es/_visual-editing.mjs\");\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @sanity/ui */ \"(app-pages-browser)/./node_modules/@sanity/ui/dist/index.mjs\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! styled-components */ \"(app-pages-browser)/./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var is_hotkey_esm__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! is-hotkey-esm */ \"(app-pages-browser)/./node_modules/is-hotkey-esm/dist/index.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/isEqual.js */ \"(app-pages-browser)/./node_modules/lodash/isEqual.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass PaneResolutionError extends Error {\n  constructor({\n    message,\n    context,\n    helpId,\n    cause\n  }) {\n    super(message), this.name = \"PaneResolutionError\", this.context = context, this.helpId = helpId, this.cause = cause;\n  }\n}\nconst randomIdCache = /* @__PURE__ */ new WeakMap();\nfunction assignId(obj) {\n  const cachedValue = randomIdCache.get(obj);\n  if (cachedValue) return cachedValue;\n  const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_5__.nanoid)();\n  return randomIdCache.set(obj, id), id;\n}\nconst isPromise = (thing) => !!thing && typeof thing?.then == \"function\", isSerializable = (thing) => (0,sanity__WEBPACK_IMPORTED_MODULE_6__.isRecord)(thing) ? typeof thing.serialize == \"function\" : !1, rethrowWithPaneResolutionErrors = (next) => (unresolvedPane, context, flatIndex) => {\n  try {\n    return next(unresolvedPane, context, flatIndex);\n  } catch (e) {\n    throw e instanceof PaneResolutionError ? e : new PaneResolutionError({\n      message: typeof e?.message == \"string\" ? e.message : \"\",\n      context,\n      cause: e\n    });\n  }\n}, wrapWithPublishReplay = (next) => (...args) => next(...args).pipe(\n  // need to add publishReplay + refCount to ensure new subscribers always\n  // get an emission. without this, memoized observables may get stuck\n  // waiting for their first emissions resulting in a loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.publishReplay)(1),\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.refCount)()\n);\nfunction createPaneResolver(middleware) {\n  const resolvePane = rethrowWithPaneResolutionErrors(wrapWithPublishReplay(middleware((unresolvedPane, context, flatIndex) => {\n    if (!unresolvedPane)\n      throw new PaneResolutionError({\n        message: \"Pane returned no child\",\n        context,\n        helpId: \"structure-item-returned-no-child\"\n      });\n    return isPromise(unresolvedPane) || (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.isObservable)(unresolvedPane) ? (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.from)(unresolvedPane).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.switchMap)((result) => resolvePane(result, context, flatIndex))) : isSerializable(unresolvedPane) ? resolvePane(unresolvedPane.serialize(context), context, flatIndex) : typeof unresolvedPane == \"function\" ? resolvePane(unresolvedPane(context.id, context), context, flatIndex) : (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(unresolvedPane);\n  })));\n  return resolvePane;\n}\nconst bindCache = /* @__PURE__ */ new WeakMap();\nfunction memoBind(obj, methodKey) {\n  const boundMethods = bindCache.get(obj) || /* @__PURE__ */ new Map();\n  if (boundMethods) {\n    const bound2 = boundMethods.get(methodKey);\n    if (bound2) return bound2;\n  }\n  const method = obj[methodKey];\n  if (typeof method != \"function\")\n    throw new Error(`Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`);\n  const bound = method.bind(obj);\n  return boundMethods.set(methodKey, bound), bindCache.set(obj, boundMethods), bound;\n}\nasync function resolveIntent(options) {\n  const resolvedPaneCache = /* @__PURE__ */ new Map(), resolvePane = createPaneResolver((nextFn) => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && `${assignId(unresolvedPane)}-${context.path.join(\"__\")}`, cachedResolvedPane = key && resolvedPaneCache.get(key);\n    if (cachedResolvedPane) return cachedResolvedPane;\n    const result = nextFn(unresolvedPane, context, flatIndex);\n    return key && resolvedPaneCache.set(key, result), result;\n  }), fallbackEditorPanes = [[{\n    id: `__edit__${options.params.id}`,\n    params: {\n      ...lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__(options.params, [\"id\"]),\n      type: options.params.type\n    },\n    payload: options.payload\n  }]];\n  async function traverse({\n    currentId,\n    flatIndex,\n    intent,\n    params,\n    parent: parent2,\n    path,\n    payload,\n    unresolvedPane,\n    levelIndex,\n    structureContext\n  }) {\n    if (!unresolvedPane) return [];\n    const {\n      id: targetId,\n      type: schemaTypeName,\n      ...otherParams\n    } = params, resolvedPane = await (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.firstValueFrom)(resolvePane(unresolvedPane, {\n      id: currentId,\n      splitIndex: 0,\n      parent: parent2,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: void 0,\n      structureContext\n    }, flatIndex));\n    return resolvedPane.type === \"document\" && resolvedPane.id === targetId ? [{\n      panes: [...path.slice(0, path.length - 1).map((i) => [{\n        id: i\n      }]), [{\n        id: targetId,\n        params: otherParams,\n        payload\n      }]],\n      depthIndex: path.length,\n      levelIndex\n    }] : (\n      // if the resolve pane's `canHandleIntent` returns true, then resolve\n      resolvedPane.canHandleIntent?.(intent, params, {\n        pane: resolvedPane,\n        index: flatIndex\n      }) || // if the pane's `canHandleIntent` did not return true, then match against\n      // this default case. we will resolve the intent if:\n      resolvedPane.type === \"documentList\" && // 1. the schema type matches (this required for the document to render)\n      resolvedPane.schemaTypeName === schemaTypeName && // 2. the filter is the default filter.\n      //\n      // NOTE: this case is to prevent false positive matches where the user\n      // has configured a more specific filter for a particular type. In that\n      // case, the user can implement their own `canHandleIntent` function\n      resolvedPane.options.filter === \"_type == $type\" ? [{\n        panes: [\n          // map the current path to router panes\n          ...path.map((id) => [{\n            id\n          }]),\n          // then augment with the intents IDs and params\n          [{\n            id: params.id,\n            params: otherParams,\n            payload\n          }]\n        ],\n        depthIndex: path.length,\n        levelIndex\n      }] : resolvedPane.type === \"list\" && resolvedPane.child && resolvedPane.items ? (await Promise.all(resolvedPane.items.map((item, nextLevelIndex) => item.type === \"divider\" ? Promise.resolve([]) : traverse({\n        currentId: item._id || item.id,\n        flatIndex: flatIndex + 1,\n        intent,\n        params,\n        parent: resolvedPane,\n        path: [...path, item.id],\n        payload,\n        unresolvedPane: typeof resolvedPane.child == \"function\" ? memoBind(resolvedPane, \"child\") : resolvedPane.child,\n        levelIndex: nextLevelIndex,\n        structureContext\n      })))).flat() : []\n    );\n  }\n  const closestPaneToRoot = (await traverse({\n    currentId: \"root\",\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext\n  })).sort((a, b) => a.depthIndex === b.depthIndex ? a.levelIndex - b.levelIndex : a.depthIndex - b.depthIndex)[0];\n  return closestPaneToRoot ? closestPaneToRoot.panes : fallbackEditorPanes;\n}\nconst fallbackEditorChild = (nodeId, context) => {\n  const id = nodeId.replace(/^__edit__/, \"\"), {\n    params,\n    payload,\n    structureContext: {\n      resolveDocumentNode\n    }\n  } = context, {\n    type,\n    template\n  } = params;\n  if (!type)\n    throw new Error(`Document type for document with ID ${id} was not provided in the router params.`);\n  let defaultDocumentBuilder = resolveDocumentNode({\n    schemaType: type,\n    documentId: id\n  }).id(\"editor\");\n  return template && (defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(template, payload)), defaultDocumentBuilder.serialize();\n};\nfunction hashContext(context) {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path\n  })})`;\n}\nconst hashResolvedPaneMeta = (meta) => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === \"resolvedMeta\" ? assignId(meta.paneNode) : null\n  };\n  return `metaHash(${JSON.stringify(normalized)})`;\n};\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent: parent2,\n  path,\n  resolvePane,\n  structureContext\n}) {\n  const [current, ...rest] = flattenedRouterPanes, next = rest[0], context = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent: parent2,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext\n  };\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.switchMap)((paneNode) => {\n        const resolvedPaneMeta = {\n          type: \"resolvedMeta\",\n          ...current,\n          paneNode,\n          path: context.path\n        }, loadingPanes = rest.map((i, restIndex) => ({\n          type: \"loading\",\n          path: [...context.path, ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`)],\n          paneNode: null,\n          ...i\n        }));\n        if (!rest.length)\n          return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)([resolvedPaneMeta]);\n        let nextStream;\n        return (\n          /* the fallback editor case */\n          next?.routerPaneSibling.id.startsWith(\"__edit__\") ? nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent: parent2,\n            path: context.path,\n            resolvePane,\n            structureContext\n          }) : current.groupIndex === next?.groupIndex ? nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent: parent2,\n            path,\n            resolvePane,\n            structureContext\n          }) : nextStream = resolvePaneTree({\n            unresolvedPane: typeof paneNode.child == \"function\" ? memoBind(paneNode, \"child\") : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext\n          }), (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.concat)(\n            // we emit the loading panes first in a concat (this emits immediately)\n            (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)([resolvedPaneMeta, ...loadingPanes]),\n            // then whenever the next stream is done, the results will be combined.\n            nextStream.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.map)((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes]))\n          )\n        );\n      })\n    );\n  } catch (e) {\n    if (e instanceof PaneResolutionError && (e.context && console.warn(`Pane resolution error at index ${e.context.index}${e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : \"\"}: ${e.message}${e.helpId ? ` - see ${(0,_generate_help_url_esm_js__WEBPACK_IMPORTED_MODULE_16__.generateHelpUrl)(e.helpId)}` : \"\"}`, e), e.helpId === \"structure-item-returned-no-child\"))\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)([]);\n    throw e;\n  }\n}\nfunction createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: /* @__PURE__ */ new Map(),\n    resolvePane: () => rxjs__WEBPACK_IMPORTED_MODULE_17__.NEVER\n  },\n  structureContext\n}) {\n  return routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.map)((rawRouterPanes) => [[{\n      id: \"root\"\n    }], ...rawRouterPanes]),\n    // create flattened router panes\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.map)((routerPanes) => routerPanes.flatMap((routerPaneGroup, groupIndex) => routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n      routerPaneSibling,\n      groupIndex,\n      siblingIndex\n    }))).map((i, index) => ({\n      ...i,\n      flatIndex: index\n    }))),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.startWith)([]),\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.pairwise)(),\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.map)(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i], currValue = curr[i];\n        if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_4__(prevValue, currValue))\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i\n          };\n      }\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length\n      };\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.scan)((acc, next) => {\n      const {\n        cacheKeysByFlatIndex,\n        resolvedPaneCache\n      } = acc, {\n        flattenedRouterPanes,\n        diffIndex\n      } = next, beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1), afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1), keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet))), keysToDelete = afterDiffIndex.flatMap((keySet) => Array.from(keySet)).filter((key) => !keysToKeep.has(key));\n      for (const key of keysToDelete)\n        resolvedPaneCache.delete(key);\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver((nextFn) => (unresolvedPane, context, flatIndex) => {\n          const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`, cachedResolvedPane = key && resolvedPaneCache.get(key);\n          if (cachedResolvedPane) return cachedResolvedPane;\n          const result = nextFn(unresolvedPane, context, flatIndex);\n          if (!key) return result;\n          const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || /* @__PURE__ */ new Set();\n          return cacheKeySet.add(key), cacheKeysByFlatIndex[flatIndex] = cacheKeySet, resolvedPaneCache.set(key, result), result;\n        })\n      };\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.switchMap)(({\n      flattenedRouterPanes,\n      resolvePane\n    }) => resolvePaneTree({\n      unresolvedPane: rootPaneNode,\n      flattenedRouterPanes,\n      parent: null,\n      path: [],\n      resolvePane,\n      structureContext\n    }))\n  ).pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.scan)((prev, next) => next.map((nextPane, index) => {\n      const prevPane = prev[index];\n      return !prevPane || nextPane.type !== \"loading\" ? nextPane : prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id ? prevPane : nextPane;\n    }), []),\n    // this prevents duplicate emissions\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.distinctUntilChanged)((prev, next) => {\n      if (prev.length !== next.length) return !1;\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i], nextValue = next[i];\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue))\n          return !1;\n      }\n      return !0;\n    })\n  );\n}\nfunction useRouterPanesStream() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(6), [routerStateSubject] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(_temp$5);\n  let t0;\n  $[0] !== routerStateSubject ? (t0 = routerStateSubject.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.map)(_temp2$3)), $[0] = routerStateSubject, $[1] = t0) : t0 = $[1];\n  const routerPanes$ = t0, {\n    state: routerState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_22__.useRouter)();\n  let t1, t2;\n  return $[2] !== routerState || $[3] !== routerStateSubject ? (t1 = () => {\n    routerStateSubject.next(routerState);\n  }, t2 = [routerState, routerStateSubject], $[2] = routerState, $[3] = routerStateSubject, $[4] = t1, $[5] = t2) : (t1 = $[4], t2 = $[5]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2), routerPanes$;\n}\nfunction _temp2$3(_routerState) {\n  return _routerState?.panes || [];\n}\nfunction _temp$5() {\n  return new rxjs__WEBPACK_IMPORTED_MODULE_23__.ReplaySubject(1);\n}\nfunction useResolvedPanes() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(15), [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(), [maximizedPane, setMaximizedPane] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  if (error)\n    throw error;\n  const {\n    structureContext,\n    rootPaneNode\n  } = (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.useStructureTool)();\n  let t0;\n  $[0] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = {\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: []\n  }, $[0] = t0) : t0 = $[0];\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t0), routerPanesStream = useRouterPanesStream();\n  let t1, t2;\n  $[1] !== rootPaneNode || $[2] !== routerPanesStream || $[3] !== structureContext ? (t1 = () => {\n    const subscription = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext\n    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.map)(_temp5$1)).subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e)\n    });\n    return () => subscription.unsubscribe();\n  }, t2 = [rootPaneNode, routerPanesStream, structureContext], $[1] = rootPaneNode, $[2] = routerPanesStream, $[3] = structureContext, $[4] = t1, $[5] = t2) : (t1 = $[4], t2 = $[5]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2);\n  let t3;\n  if ($[6] !== data.paneDataItems || $[7] !== maximizedPane) {\n    let t42;\n    $[9] !== maximizedPane ? (t42 = (item) => ({\n      ...item,\n      maximized: maximizedPane ? item.key === maximizedPane.key : !1\n    }), $[9] = maximizedPane, $[10] = t42) : t42 = $[10], t3 = data.paneDataItems.map(t42), $[6] = data.paneDataItems, $[7] = maximizedPane, $[8] = t3;\n  } else\n    t3 = $[8];\n  const paneDataItemsWithMaximized = t3;\n  let t4;\n  return $[11] !== data || $[12] !== maximizedPane || $[13] !== paneDataItemsWithMaximized ? (t4 = {\n    ...data,\n    paneDataItems: paneDataItemsWithMaximized,\n    maximizedPane,\n    setMaximizedPane\n  }, $[11] = data, $[12] = maximizedPane, $[13] = paneDataItemsWithMaximized, $[14] = t4) : t4 = $[14], t4;\n}\nfunction _temp5$1(resolvedPanes) {\n  const routerPanes = resolvedPanes.reduce(_temp3$1, []), groupsLen = routerPanes.length, paneDataItems = resolvedPanes.map((pane) => {\n    const {\n      groupIndex,\n      flatIndex,\n      siblingIndex,\n      routerPaneSibling,\n      path\n    } = pane, itemId = routerPaneSibling.id, nextGroup = routerPanes[groupIndex + 1];\n    return {\n      active: groupIndex === groupsLen - 2,\n      childItemId: nextGroup?.[0].id ?? null,\n      index: flatIndex,\n      itemId: routerPaneSibling.id,\n      groupIndex,\n      key: `${pane.type === \"loading\" ? \"unknown\" : pane.paneNode.id}-${itemId}-${siblingIndex}`,\n      pane: pane.type === \"loading\" ? _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE : pane.paneNode,\n      params: routerPaneSibling.params || {},\n      path: path.join(\";\"),\n      payload: routerPaneSibling.payload,\n      selected: flatIndex === resolvedPanes.length - 1,\n      siblingIndex,\n      maximized: !1\n    };\n  });\n  return {\n    paneDataItems,\n    routerPanes,\n    resolvedPanes: paneDataItems.map(_temp4$1)\n  };\n}\nfunction _temp4$1(pane_0) {\n  return pane_0.pane;\n}\nfunction _temp3$1(acc, next) {\n  const currentGroup = acc[next.groupIndex] || [];\n  return currentGroup[next.siblingIndex] = next.routerPaneSibling, acc[next.groupIndex] = currentGroup, acc;\n}\nasync function ensureDocumentIdAndType(documentStore, id, type) {\n  if (id && type) return {\n    id,\n    type\n  };\n  if (!id && type) return {\n    id: (0,_sanity_uuid__WEBPACK_IMPORTED_MODULE_25__[\"default\"])(),\n    type\n  };\n  if (id && !type) {\n    const resolvedType = await (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.firstValueFrom)(documentStore.resolveTypeForDocument(id));\n    return {\n      id,\n      type: resolvedType\n    };\n  }\n  throw new PaneResolutionError({\n    message: \"Neither document `id` or `type` was provided when trying to resolve intent.\"\n  });\n}\nconst EMPTY_RECORD = {}, IntentResolver = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(7), {\n    navigate\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_22__.useRouter)(), maybeIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_22__.useRouterState)(_temp$4), {\n    rootPaneNode,\n    structureContext\n  } = (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.useStructureTool)(), documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useDocumentStore)(), [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  if (error)\n    throw error;\n  let t0, t1;\n  return $[0] !== documentStore || $[1] !== maybeIntent || $[2] !== navigate || $[3] !== rootPaneNode || $[4] !== structureContext ? (t0 = () => {\n    if (maybeIntent) {\n      const {\n        intent,\n        params,\n        payload\n      } = maybeIntent;\n      let cancelled = !1;\n      return (async function() {\n        const {\n          id,\n          type\n        } = await ensureDocumentIdAndType(documentStore, typeof params.id == \"string\" ? params.id : void 0, typeof params.type == \"string\" ? params.type : void 0);\n        if (cancelled)\n          return;\n        const panes = await resolveIntent({\n          intent,\n          params: {\n            ...params,\n            id,\n            type\n          },\n          payload,\n          rootPaneNode,\n          structureContext\n        });\n        cancelled || navigate({\n          panes\n        }, {\n          replace: !0\n        });\n      })().catch(setError), () => {\n        cancelled = !0;\n      };\n    }\n  }, t1 = [documentStore, maybeIntent, navigate, rootPaneNode, structureContext], $[0] = documentStore, $[1] = maybeIntent, $[2] = navigate, $[3] = rootPaneNode, $[4] = structureContext, $[5] = t0, $[6] = t1) : (t0 = $[5], t1 = $[6]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n});\nfunction _temp$4(routerState) {\n  const intentName = typeof routerState.intent == \"string\" ? routerState.intent : void 0;\n  return intentName ? {\n    intent: intentName,\n    params: (0,sanity__WEBPACK_IMPORTED_MODULE_6__.isRecord)(routerState.params) ? routerState.params : EMPTY_RECORD,\n    payload: routerState.payload\n  } : void 0;\n}\nconst PathSegment = styled_components__WEBPACK_IMPORTED_MODULE_26__.styled.span`\n  &:not(:last-child)::after {\n    content: ' âž ';\n    opacity: 0.5;\n  }\n`;\nfunction formatStack(stack) {\n  return stack.replace(/\\(\\.\\.\\.\\)\\./g, `(...)\n  .`).replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, \"\").replace(/___default\\./g, \".\").replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, \"g\"), \" (\");\n}\nfunction StructureError(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(74), {\n    error\n  } = t0;\n  if (!(error instanceof PaneResolutionError))\n    throw error;\n  const {\n    cause\n  } = error, {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useTranslation)(_StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.structureLocaleNamespace), stack = cause?.stack || error.stack;\n  let t1;\n  $[0] !== cause || $[1] !== error.message || $[2] !== stack ? (t1 = stack && !(cause instanceof _StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.SerializeError) && !error.message.includes(\"Module build failed:\"), $[0] = cause, $[1] = error.message, $[2] = stack, $[3] = t1) : t1 = $[3];\n  const showStack = t1;\n  let T0, T1, T2, handleReload, helpId, t10, t11, t12, t13, t14, t2, t3, t4, t5, t6, t7, t8, t9;\n  if ($[4] !== cause || $[5] !== error.helpId || $[6] !== t) {\n    const path = cause instanceof _StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.SerializeError ? cause.path : [];\n    helpId = cause instanceof _StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.SerializeError && cause.helpId || error.helpId, handleReload = _temp$3, T2 = _sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Card, t10 = \"fill\", t11 = \"auto\", t12 = 4, t13 = \"border\", t14 = \"critical\", T1 = _sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Container;\n    let t152;\n    $[25] !== t ? (t152 = t(\"structure-error.header.text\"), $[25] = t, $[26] = t152) : t152 = $[26], $[27] !== t152 ? (t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Heading, { as: \"h2\", children: t152 }), $[27] = t152, $[28] = t9) : t9 = $[28], T0 = _sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Card, t2 = 4, t3 = 4, t4 = 2, t5 = \"auto\", t6 = 1, t7 = \"inherit\", t8 = path.length > 0 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Stack, { space: 2, children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { size: 1, weight: \"medium\", children: t(\"structure-error.structure-path.label\") }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Code, { children: path.slice(1).map(_temp2$2) })\n    ] }), $[4] = cause, $[5] = error.helpId, $[6] = t, $[7] = T0, $[8] = T1, $[9] = T2, $[10] = handleReload, $[11] = helpId, $[12] = t10, $[13] = t11, $[14] = t12, $[15] = t13, $[16] = t14, $[17] = t2, $[18] = t3, $[19] = t4, $[20] = t5, $[21] = t6, $[22] = t7, $[23] = t8, $[24] = t9;\n  } else\n    T0 = $[7], T1 = $[8], T2 = $[9], handleReload = $[10], helpId = $[11], t10 = $[12], t11 = $[13], t12 = $[14], t13 = $[15], t14 = $[16], t2 = $[17], t3 = $[18], t4 = $[19], t5 = $[20], t6 = $[21], t7 = $[22], t8 = $[23], t9 = $[24];\n  let t15;\n  $[29] !== t ? (t15 = t(\"structure-error.error.label\"), $[29] = t, $[30] = t15) : t15 = $[30];\n  let t16;\n  $[31] !== t15 ? (t16 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { size: 1, weight: \"medium\", children: t15 }), $[31] = t15, $[32] = t16) : t16 = $[32];\n  let t17;\n  $[33] !== error.message || $[34] !== showStack || $[35] !== stack ? (t17 = showStack ? formatStack(stack) : error.message, $[33] = error.message, $[34] = showStack, $[35] = stack, $[36] = t17) : t17 = $[36];\n  let t18;\n  $[37] !== t17 ? (t18 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Code, { children: t17 }), $[37] = t17, $[38] = t18) : t18 = $[38];\n  let t19;\n  $[39] !== t16 || $[40] !== t18 ? (t19 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Stack, { marginTop: 4, space: 2, children: [\n    t16,\n    t18\n  ] }), $[39] = t16, $[40] = t18, $[41] = t19) : t19 = $[41];\n  let t20;\n  $[42] !== helpId || $[43] !== t ? (t20 = helpId && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Box, { marginTop: 4, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: (0,_generate_help_url_esm_js__WEBPACK_IMPORTED_MODULE_16__.generateHelpUrl)(helpId), rel: \"noopener noreferrer\", target: \"_blank\", children: t(\"structure-error.docs-link.text\") }) }) }), $[42] = helpId, $[43] = t, $[44] = t20) : t20 = $[44];\n  let t21;\n  $[45] !== t ? (t21 = t(\"structure-error.reload-button.text\"), $[45] = t, $[46] = t21) : t21 = $[46];\n  let t22;\n  $[47] !== handleReload || $[48] !== t21 ? (t22 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Box, { marginTop: 4, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_TooltipDelayGroupProvider_js__WEBPACK_IMPORTED_MODULE_29__.Button, { text: t21, icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_30__.SyncIcon, tone: \"primary\", onClick: handleReload }) }), $[47] = handleReload, $[48] = t21, $[49] = t22) : t22 = $[49];\n  let t23;\n  $[50] !== T0 || $[51] !== t19 || $[52] !== t2 || $[53] !== t20 || $[54] !== t22 || $[55] !== t3 || $[56] !== t4 || $[57] !== t5 || $[58] !== t6 || $[59] !== t7 || $[60] !== t8 ? (t23 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(T0, { marginTop: t2, padding: t3, radius: t4, overflow: t5, shadow: t6, tone: t7, children: [\n    t8,\n    t19,\n    t20,\n    t22\n  ] }), $[50] = T0, $[51] = t19, $[52] = t2, $[53] = t20, $[54] = t22, $[55] = t3, $[56] = t4, $[57] = t5, $[58] = t6, $[59] = t7, $[60] = t8, $[61] = t23) : t23 = $[61];\n  let t24;\n  $[62] !== T1 || $[63] !== t23 || $[64] !== t9 ? (t24 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(T1, { children: [\n    t9,\n    t23\n  ] }), $[62] = T1, $[63] = t23, $[64] = t9, $[65] = t24) : t24 = $[65];\n  let t25;\n  return $[66] !== T2 || $[67] !== t10 || $[68] !== t11 || $[69] !== t12 || $[70] !== t13 || $[71] !== t14 || $[72] !== t24 ? (t25 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(T2, { height: t10, overflow: t11, padding: t12, sizing: t13, tone: t14, children: t24 }), $[66] = T2, $[67] = t10, $[68] = t11, $[69] = t12, $[70] = t13, $[71] = t14, $[72] = t24, $[73] = t25) : t25 = $[73], t25;\n}\nfunction _temp2$2(segment, i) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PathSegment, { children: segment }, `${segment}-${i}`);\n}\nfunction _temp$3() {\n  window.location.reload();\n}\nfunction NoDocumentTypesScreen() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(17), {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useTranslation)(_StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.structureLocaleNamespace);\n  let t0;\n  $[0] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Box, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { size: 1, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_30__.WarningOutlineIcon, {}) }) }), $[0] = t0) : t0 = $[0];\n  let t1;\n  $[1] !== t ? (t1 = t(\"no-document-types-screen.title\"), $[1] = t, $[2] = t1) : t1 = $[2];\n  let t2;\n  $[3] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { as: \"h1\", size: 1, weight: \"medium\", children: t1 }), $[3] = t1, $[4] = t2) : t2 = $[4];\n  let t3;\n  $[5] !== t ? (t3 = t(\"no-document-types-screen.subtitle\"), $[5] = t, $[6] = t3) : t3 = $[6];\n  let t4;\n  $[7] !== t3 ? (t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { as: \"p\", muted: !0, size: 1, children: t3 }), $[7] = t3, $[8] = t4) : t4 = $[8];\n  let t5;\n  $[9] !== t ? (t5 = t(\"no-document-types-screen.link-text\"), $[9] = t, $[10] = t5) : t5 = $[10];\n  let t6;\n  $[11] !== t5 ? (t6 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Text, { as: \"p\", muted: !0, size: 1, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\", target: \"_blank\", rel: \"noreferrer\", children: t5 }) }), $[11] = t5, $[12] = t6) : t6 = $[12];\n  let t7;\n  return $[13] !== t2 || $[14] !== t4 || $[15] !== t6 ? (t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Card, { height: \"fill\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Flex, { align: \"center\", height: \"fill\", justify: \"center\", padding: 4, sizing: \"border\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Container, { width: 0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Card, { padding: 4, radius: 2, shadow: 1, tone: \"caution\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Flex, { children: [\n    t0,\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.Stack, { flex: 1, marginLeft: 3, space: 3, children: [\n      t2,\n      t4,\n      t6\n    ] })\n  ] }) }) }) }) }), $[13] = t2, $[14] = t4, $[15] = t6, $[16] = t7) : t7 = $[16], t7;\n}\nconst DocumentTitle = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(7), {\n    documentId,\n    documentType\n  } = props, {\n    selectedReleaseId\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.usePerspective)(), editState = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useEditState)(documentId, documentType, \"default\", selectedReleaseId), schema = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useSchema)(), {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useTranslation)(_StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.structureLocaleNamespace), isNewDocument = !editState?.published && !editState?.draft, documentValue = editState?.version || editState?.draft || editState?.published, schemaType = schema.get(documentType), {\n    value,\n    isLoading: previewValueIsLoading\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.unstable_useValuePreview)({\n    enabled: !!documentValue,\n    schemaType,\n    value: documentValue\n  }), {\n    lastRevisionDocument\n  } = (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.useDocumentLastRev)(documentId, documentType), documentTitle = lastRevisionDocument && !documentValue ? \"\" : isNewDocument ? t(\"browser-document-title.new-document\", {\n    schemaType: schemaType?.title || schemaType?.name\n  }) : value?.title || t(\"browser-document-title.untitled-document\"), settled = editState.ready && !previewValueIsLoading, newTitle = useConstructDocumentTitle(documentTitle);\n  let t0;\n  $[0] !== newTitle || $[1] !== settled ? (t0 = () => {\n    settled && (document.title = newTitle);\n  }, $[0] = newTitle, $[1] = settled, $[2] = t0) : t0 = $[2];\n  let t1;\n  return $[3] !== documentTitle || $[4] !== newTitle || $[5] !== settled ? (t1 = [documentTitle, settled, newTitle], $[3] = documentTitle, $[4] = newTitle, $[5] = settled, $[6] = t1) : t1 = $[6], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n}, PassthroughTitle = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(5), {\n    title\n  } = props, newTitle = useConstructDocumentTitle(title);\n  let t0;\n  $[0] !== newTitle ? (t0 = () => {\n    document.title = newTitle;\n  }, $[0] = newTitle, $[1] = t0) : t0 = $[1];\n  let t1;\n  return $[2] !== newTitle || $[3] !== title ? (t1 = [newTitle, title], $[2] = newTitle, $[3] = title, $[4] = t1) : t1 = $[4], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n}, StructureTitle = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(8), {\n    resolvedPanes\n  } = props;\n  if (!resolvedPanes?.length)\n    return null;\n  const lastPane = resolvedPanes[resolvedPanes.length - 1];\n  if (isLoadingPane(lastPane)) {\n    let t02;\n    return $[0] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t02 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {}), $[0] = t02) : t02 = $[0], t02;\n  }\n  if (isDocumentPane(lastPane)) {\n    if (lastPane?.title) {\n      let t03;\n      return $[1] !== lastPane.title ? (t03 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, { title: lastPane.title }), $[1] = lastPane.title, $[2] = t03) : t03 = $[2], t03;\n    }\n    let t02;\n    return $[3] !== lastPane.options.id || $[4] !== lastPane.options.type ? (t02 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentTitle, { documentId: lastPane.options.id, documentType: lastPane.options.type }), $[3] = lastPane.options.id, $[4] = lastPane.options.type, $[5] = t02) : t02 = $[5], t02;\n  }\n  const t0 = lastPane?.title;\n  let t1;\n  return $[6] !== t0 ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, { title: t0 }), $[6] = t0, $[7] = t1) : t1 = $[7], t1;\n};\nfunction useConstructDocumentTitle(activeTitle) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(3), structureToolBaseTitle = (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.useStructureTool)().structureContext.title;\n  let t0;\n  return $[0] !== activeTitle || $[1] !== structureToolBaseTitle ? (t0 = [activeTitle, structureToolBaseTitle].filter(_temp$2), $[0] = activeTitle, $[1] = structureToolBaseTitle, $[2] = t0) : t0 = $[2], t0.join(\" | \");\n}\nfunction _temp$2(title) {\n  return title;\n}\nfunction isDocumentPane(pane) {\n  return pane !== _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE && pane.type === \"document\";\n}\nfunction isLoadingPane(pane) {\n  return pane === _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE;\n}\nconst StyledPaneLayout = (0,styled_components__WEBPACK_IMPORTED_MODULE_26__.styled)((0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.PaneLayout))`\n  min-height: 100%;\n  min-width: 320px;\n`, isSaveHotkey = (0,is_hotkey_esm__WEBPACK_IMPORTED_MODULE_31__.isHotkey)(\"mod+s\"), StructureTool = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(58), {\n    onPaneChange\n  } = t0, {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_32__.useToast)(), schema = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useSchema)(), {\n    navigate\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_22__.useRouter)(), routerState = (0,sanity_router__WEBPACK_IMPORTED_MODULE_22__.useRouterState)(), {\n    layoutCollapsed,\n    setLayoutCollapsed\n  } = (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.useStructureTool)(), resolvedPanesValue = useResolvedPanes(), {\n    paneDataItems,\n    resolvedPanes,\n    setMaximizedPane,\n    maximizedPane\n  } = resolvedPanesValue, isResolvingIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_22__.useRouterState)(_temp$1), {\n    sanity: t1\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.useTheme)(), {\n    media\n  } = t1, [portalElement, setPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  let t2;\n  $[0] !== setLayoutCollapsed ? (t2 = () => setLayoutCollapsed(!0), $[0] = setLayoutCollapsed, $[1] = t2) : t2 = $[1];\n  const handleRootCollapse = t2;\n  let t3;\n  $[2] !== setLayoutCollapsed ? (t3 = () => setLayoutCollapsed(!1), $[2] = setLayoutCollapsed, $[3] = t3) : t3 = $[3];\n  const handleRootExpand = t3;\n  let t4;\n  if ($[4] !== paneDataItems) {\n    const maximizedLastIndex = paneDataItems.findLastIndex(_temp2$1);\n    t4 = maximizedLastIndex === -1 ? paneDataItems : paneDataItems.slice(maximizedLastIndex).filter((pane_0) => pane_0.groupIndex <= paneDataItems[maximizedLastIndex].groupIndex), $[4] = paneDataItems, $[5] = t4;\n  } else\n    t4 = $[5];\n  const paneItemsToShow = t4;\n  let t5, t6;\n  $[6] !== onPaneChange || $[7] !== resolvedPanes ? (t5 = () => {\n    resolvedPanes.length && onPaneChange(resolvedPanes);\n  }, t6 = [onPaneChange, resolvedPanes], $[6] = onPaneChange, $[7] = resolvedPanes, $[8] = t5, $[9] = t6) : (t5 = $[8], t6 = $[9]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t5, t6);\n  let t7, t8;\n  $[10] !== pushToast ? (t7 = () => {\n    const handleGlobalKeyDown = (event) => {\n      isSaveHotkey(event) && (event.preventDefault(), pushToast({\n        closable: !0,\n        id: \"auto-save-message\",\n        status: \"info\",\n        title: \"Your work is automatically saved!\",\n        duration: 4e3\n      }));\n    };\n    return window.addEventListener(\"keydown\", handleGlobalKeyDown), () => window.removeEventListener(\"keydown\", handleGlobalKeyDown);\n  }, t8 = [pushToast], $[10] = pushToast, $[11] = t7, $[12] = t8) : (t7 = $[11], t8 = $[12]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t7, t8);\n  const hasDefinedDocumentTypes = schema._original?.types.some(sanity__WEBPACK_IMPORTED_MODULE_6__._isCustomDocumentTypeDefinition);\n  let t9;\n  $[13] !== navigate || $[14] !== routerState?.panes || $[15] !== setMaximizedPane ? (t9 = (paneData) => {\n    if (!paneData)\n      return;\n    const currentPanes = routerState?.panes || [];\n    if (paneData.maximized) {\n      setMaximizedPane(null), navigate({\n        panes: currentPanes\n      });\n      return;\n    }\n    if (paneData.pane !== _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE && paneData.pane.type === \"document\") {\n      const slicedPanes = currentPanes.slice(0, paneData.groupIndex);\n      setMaximizedPane(paneData), navigate({\n        panes: slicedPanes\n      });\n    }\n  }, $[13] = navigate, $[14] = routerState?.panes, $[15] = setMaximizedPane, $[16] = t9) : t9 = $[16];\n  const onSetMaximizedPane = t9, previousSelectedIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(-1);\n  let t10;\n  $[17] !== navigate || $[18] !== paneDataItems || $[19] !== routerState?.panes || $[20] !== setMaximizedPane ? (t10 = () => {\n    const focusedPaneAccordingToParams = paneDataItems.find(_temp3);\n    if (!focusedPaneAccordingToParams)\n      return;\n    focusedPaneAccordingToParams.pane !== _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE && focusedPaneAccordingToParams.pane.type === \"document\" && setMaximizedPane(focusedPaneAccordingToParams);\n    const panesWithoutFocus = (routerState?.panes || []).map(_temp5);\n    navigate({\n      panes: panesWithoutFocus\n    }, {\n      replace: !0\n    });\n  }, $[17] = navigate, $[18] = paneDataItems, $[19] = routerState?.panes, $[20] = setMaximizedPane, $[21] = t10) : t10 = $[21];\n  const t11 = routerState?.panes;\n  let t12;\n  $[22] !== navigate || $[23] !== paneDataItems || $[24] !== setMaximizedPane || $[25] !== t11 ? (t12 = [navigate, paneDataItems, t11, setMaximizedPane], $[22] = navigate, $[23] = paneDataItems, $[24] = setMaximizedPane, $[25] = t11, $[26] = t12) : t12 = $[26], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t10, t12);\n  let t13, t14;\n  if ($[27] !== maximizedPane || $[28] !== paneDataItems || $[29] !== setMaximizedPane ? (t13 = () => {\n    const selectedIndex = paneDataItems.findIndex(_temp6), prevSelectedIndex = previousSelectedIndexRef.current;\n    if (previousSelectedIndexRef.current = selectedIndex, !!maximizedPane) {\n      if (maximizedPane.pane !== _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE && maximizedPane.pane.type !== \"document\") {\n        setMaximizedPane(null);\n        return;\n      }\n      if (selectedIndex !== -1 && selectedIndex !== prevSelectedIndex) {\n        const selectedPane = paneDataItems[selectedIndex];\n        setMaximizedPane(selectedPane);\n        return;\n      }\n      if (!paneDataItems.some((pane_3) => pane_3.key === maximizedPane.key)) {\n        const fallbackPane = paneDataItems.find((pane_4) => pane_4.groupIndex === maximizedPane.groupIndex && pane_4.siblingIndex === maximizedPane.siblingIndex && pane_4.pane !== _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE && pane_4.pane.type === \"document\");\n        setMaximizedPane(fallbackPane || null);\n      }\n    }\n  }, t14 = [maximizedPane, paneDataItems, setMaximizedPane], $[27] = maximizedPane, $[28] = paneDataItems, $[29] = setMaximizedPane, $[30] = t13, $[31] = t14) : (t13 = $[30], t14 = $[31]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t13, t14), !hasDefinedDocumentTypes) {\n    let t152;\n    return $[32] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t152 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NoDocumentTypesScreen, {}), $[32] = t152) : t152 = $[32], t152;\n  }\n  const t15 = portalElement || null, t16 = layoutCollapsed ? void 0 : \"fill\", t17 = media[1];\n  let t18;\n  if ($[33] !== onSetMaximizedPane || $[34] !== paneItemsToShow) {\n    let t192;\n    $[36] !== onSetMaximizedPane ? (t192 = (paneData_0) => {\n      const {\n        active,\n        childItemId,\n        groupIndex,\n        itemId,\n        key: paneKey,\n        pane: pane_5,\n        index: paneIndex,\n        params: paneParams,\n        path,\n        payload,\n        siblingIndex,\n        selected,\n        maximized\n      } = paneData_0;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: pane_5 === _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_js__WEBPACK_IMPORTED_MODULE_24__.LoadingPane, { paneKey, path, selected }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_js__WEBPACK_IMPORTED_MODULE_24__.StructureToolPane, { active, groupIndex, index: paneIndex, pane: pane_5, childItemId, itemId, paneKey, params: paneParams, payload, path, selected, siblingIndex, maximized, onSetMaximizedPane: () => onSetMaximizedPane(paneData_0) }) }, `${pane_5 === _pane_js__WEBPACK_IMPORTED_MODULE_24__.LOADING_PANE ? \"loading\" : pane_5.type}-${paneIndex}`);\n    }, $[36] = onSetMaximizedPane, $[37] = t192) : t192 = $[37], t18 = paneItemsToShow.map(t192), $[33] = onSetMaximizedPane, $[34] = paneItemsToShow, $[35] = t18;\n  } else\n    t18 = $[35];\n  let t19;\n  $[38] !== isResolvingIntent || $[39] !== paneDataItems.length ? (t19 = paneDataItems.length <= 1 && isResolvingIntent && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_js__WEBPACK_IMPORTED_MODULE_24__.LoadingPane, { paneKey: \"intent-resolver\" }), $[38] = isResolvingIntent, $[39] = paneDataItems.length, $[40] = t19) : t19 = $[40];\n  let t20;\n  $[41] !== handleRootCollapse || $[42] !== handleRootExpand || $[43] !== media[1] || $[44] !== t16 || $[45] !== t18 || $[46] !== t19 ? (t20 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StyledPaneLayout, { flex: 1, height: t16, minWidth: t17, onCollapse: handleRootCollapse, onExpand: handleRootExpand, children: [\n    t18,\n    t19\n  ] }), $[41] = handleRootCollapse, $[42] = handleRootExpand, $[43] = media[1], $[44] = t16, $[45] = t18, $[46] = t19, $[47] = t20) : t20 = $[47];\n  let t21;\n  $[48] !== resolvedPanes ? (t21 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureTitle, { resolvedPanes }), $[48] = resolvedPanes, $[49] = t21) : t21 = $[49];\n  let t22;\n  $[50] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t22 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { \"data-portal\": \"\", ref: setPortalElement }), $[50] = t22) : t22 = $[50];\n  let t23;\n  $[51] !== t15 || $[52] !== t20 || $[53] !== t21 ? (t23 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_28__.PortalProvider, { element: t15, children: [\n    t20,\n    t21,\n    t22\n  ] }), $[51] = t15, $[52] = t20, $[53] = t21, $[54] = t23) : t23 = $[54];\n  let t24;\n  return $[55] !== resolvedPanesValue || $[56] !== t23 ? (t24 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_singletons_js__WEBPACK_IMPORTED_MODULE_33__.ResolvedPanesProvider, { value: resolvedPanesValue, children: t23 }), $[55] = resolvedPanesValue, $[56] = t23, $[57] = t24) : t24 = $[57], t24;\n});\nfunction _temp$1(state) {\n  return typeof state.intent == \"string\";\n}\nfunction _temp2$1(pane) {\n  return pane.maximized;\n}\nfunction _temp3(p) {\n  return p.params?.mode === \"focus\";\n}\nfunction _temp4(pane_1) {\n  const {\n    mode: _omitMode,\n    ...rest\n  } = pane_1.params || {}, nextParams = Object.keys(rest).length ? rest : void 0;\n  return {\n    ...pane_1,\n    params: nextParams\n  };\n}\nfunction _temp5(group) {\n  return group.map(_temp4);\n}\nfunction _temp6(pane_2) {\n  return pane_2.selected;\n}\nfunction StructureToolBoundary(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(14), {\n    tool: t1\n  } = t0, {\n    options\n  } = t1, {\n    unstable_sources: sources\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_6__.useWorkspace)(), [firstSource] = sources;\n  let t2;\n  $[0] !== options ? (t2 = options || {}, $[0] = options, $[1] = t2) : t2 = $[1];\n  const {\n    source,\n    defaultDocumentNode,\n    structure\n  } = t2;\n  let t3;\n  $[2] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t3 = [], $[2] = t3) : t3 = $[2], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(_temp2, t3);\n  let t4;\n  $[3] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t4 = {\n    error: null\n  }, $[3] = t4) : t4 = $[3];\n  const [t5, setError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t4), {\n    error\n  } = t5;\n  if (error) {\n    let t62;\n    return $[4] !== error ? (t62 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureError, { error }), $[4] = error, $[5] = t62) : t62 = $[5], t62;\n  }\n  const t6 = source || firstSource.name;\n  let t7, t8;\n  $[6] === /* @__PURE__ */ Symbol.for(\"react.memo_cache_sentinel\") ? (t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureTool, { onPaneChange: _pane_js__WEBPACK_IMPORTED_MODULE_24__.setActivePanes }), t8 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IntentResolver, {}), $[6] = t7, $[7] = t8) : (t7 = $[6], t8 = $[7]);\n  let t9;\n  $[8] !== defaultDocumentNode || $[9] !== structure ? (t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_StructureToolProvider_js__WEBPACK_IMPORTED_MODULE_27__.StructureToolProvider, { defaultDocumentNode, structure, children: [\n    t7,\n    t8\n  ] }), $[8] = defaultDocumentNode, $[9] = structure, $[10] = t9) : t9 = $[10];\n  let t10;\n  return $[11] !== t6 || $[12] !== t9 ? (t10 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_TooltipDelayGroupProvider_js__WEBPACK_IMPORTED_MODULE_29__.ErrorBoundary, { onCatch: setError, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_6__.SourceProvider, { name: t6, children: t9 }) }), $[11] = t6, $[12] = t9, $[13] = t10) : t10 = $[13], t10;\n}\nfunction _temp2() {\n  return (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.setActivePanes)([]), _temp;\n}\nfunction _temp() {\n  return (0,_pane_js__WEBPACK_IMPORTED_MODULE_24__.setActivePanes)([]);\n}\n\n//# sourceMappingURL=index3.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zYW5pdHkvbGliL19jaHVua3MtZXMvaW5kZXgzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThDO0FBQ0g7QUFDeUI7QUFDa0k7QUFDL0g7QUFDb0U7QUFDOUI7QUFDbkQ7QUFDQTtBQUN4QjtBQUMwRDtBQUM1RDtBQUMwRjtBQUN0RjtBQUN5QjtBQUNBO0FBQzJEO0FBQzdFO0FBQ0Y7QUFDRDtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhDQUFNO0FBQ25CO0FBQ0E7QUFDQSxzR0FBc0csZ0RBQVE7QUFDOUc7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZEQUFhO0FBQ2YsRUFBRSx3REFBUTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asd0NBQXdDLGtEQUFZLG1CQUFtQiwyQ0FBSSxzQkFBc0IsMERBQVMsNFFBQTRRLHlDQUFFO0FBQ3hYLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFVBQVUsOEJBQThCLGVBQWU7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5QkFBeUIsR0FBRyx3QkFBd0I7QUFDekY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQSxTQUFTLDJDQUFJO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFJLHdCQUF3QixHQUFHO0FBQ2xMO0FBQ0E7QUFDQSxTQUFTLHlEQUFjO0FBQ3ZCO0FBQ0E7QUFDQSxTQUFTLHlEQUFjO0FBQ3ZCO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2FuaXR5L2xpYi9fY2h1bmtzLWVzL2luZGV4My5qcz82YTFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeHMsIGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgYyB9IGZyb20gXCJyZWFjdC1jb21waWxlci1ydW50aW1lXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBtZW1vLCB1c2VSZWYsIEZyYWdtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBpc1JlY29yZCwgdXNlRG9jdW1lbnRTdG9yZSwgdXNlVHJhbnNsYXRpb24sIHVzZVBlcnNwZWN0aXZlLCB1c2VFZGl0U3RhdGUsIHVzZVNjaGVtYSwgdW5zdGFibGVfdXNlVmFsdWVQcmV2aWV3LCBfaXNDdXN0b21Eb2N1bWVudFR5cGVEZWZpbml0aW9uLCB1c2VXb3Jrc3BhY2UsIFNvdXJjZVByb3ZpZGVyIH0gZnJvbSBcInNhbml0eVwiO1xuaW1wb3J0IHsgQnV0dG9uLCBFcnJvckJvdW5kYXJ5IH0gZnJvbSBcIi4vVG9vbHRpcERlbGF5R3JvdXBQcm92aWRlci5qc1wiO1xuaW1wb3J0IHsgdXNlU3RydWN0dXJlVG9vbCwgTE9BRElOR19QQU5FLCB1c2VEb2N1bWVudExhc3RSZXYsIFBhbmVMYXlvdXQsIExvYWRpbmdQYW5lLCBTdHJ1Y3R1cmVUb29sUGFuZSwgc2V0QWN0aXZlUGFuZXMgfSBmcm9tIFwiLi9wYW5lLmpzXCI7XG5pbXBvcnQgeyBzdHJ1Y3R1cmVMb2NhbGVOYW1lc3BhY2UsIFNlcmlhbGl6ZUVycm9yLCBTdHJ1Y3R1cmVUb29sUHJvdmlkZXIgfSBmcm9tIFwiLi9TdHJ1Y3R1cmVUb29sUHJvdmlkZXIuanNcIjtcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGVyU3RhdGUgfSBmcm9tIFwic2FuaXR5L3JvdXRlclwiO1xuaW1wb3J0IHsgUmVzb2x2ZWRQYW5lc1Byb3ZpZGVyIH0gZnJvbSBcIi4uL19zaW5nbGV0b25zLmpzXCI7XG5pbXBvcnQgb21pdCBmcm9tIFwibG9kYXNoL29taXQuanNcIjtcbmltcG9ydCB7IGZyb20sIG9mLCBpc09ic2VydmFibGUsIGZpcnN0VmFsdWVGcm9tLCBORVZFUiwgY29uY2F0LCBSZXBsYXlTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIjtcbmltcG9ydCB7IHN3aXRjaE1hcCwgcHVibGlzaFJlcGxheSwgcmVmQ291bnQsIG1hcCwgc3RhcnRXaXRoLCBwYWlyd2lzZSwgc2NhbiwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcbmltcG9ydCB7IHV1aWQgfSBmcm9tIFwiQHNhbml0eS91dWlkXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUhlbHBVcmwgfSBmcm9tIFwiLi9nZW5lcmF0ZS1oZWxwLXVybC5lc20uanNcIjtcbmltcG9ydCB7IFN5bmNJY29uLCBXYXJuaW5nT3V0bGluZUljb24gfSBmcm9tIFwiQHNhbml0eS9pY29uc1wiO1xuaW1wb3J0IHsgU3RhY2ssIFRleHQsIENvZGUsIEJveCwgQ2FyZCwgQ29udGFpbmVyLCBIZWFkaW5nLCBGbGV4LCB1c2VUb2FzdCwgdXNlVGhlbWUsIFBvcnRhbFByb3ZpZGVyIH0gZnJvbSBcIkBzYW5pdHkvdWlcIjtcbmltcG9ydCB7IHN0eWxlZCB9IGZyb20gXCJzdHlsZWQtY29tcG9uZW50c1wiO1xuaW1wb3J0IHsgaXNIb3RrZXkgfSBmcm9tIFwiaXMtaG90a2V5LWVzbVwiO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSBcImxvZGFzaC9pc0VxdWFsLmpzXCI7XG5jbGFzcyBQYW5lUmVzb2x1dGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbWVzc2FnZSxcbiAgICBjb250ZXh0LFxuICAgIGhlbHBJZCxcbiAgICBjYXVzZVxuICB9KSB7XG4gICAgc3VwZXIobWVzc2FnZSksIHRoaXMubmFtZSA9IFwiUGFuZVJlc29sdXRpb25FcnJvclwiLCB0aGlzLmNvbnRleHQgPSBjb250ZXh0LCB0aGlzLmhlbHBJZCA9IGhlbHBJZCwgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICB9XG59XG5jb25zdCByYW5kb21JZENhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhc3NpZ25JZChvYmopIHtcbiAgY29uc3QgY2FjaGVkVmFsdWUgPSByYW5kb21JZENhY2hlLmdldChvYmopO1xuICBpZiAoY2FjaGVkVmFsdWUpIHJldHVybiBjYWNoZWRWYWx1ZTtcbiAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgcmV0dXJuIHJhbmRvbUlkQ2FjaGUuc2V0KG9iaiwgaWQpLCBpZDtcbn1cbmNvbnN0IGlzUHJvbWlzZSA9ICh0aGluZykgPT4gISF0aGluZyAmJiB0eXBlb2YgdGhpbmc/LnRoZW4gPT0gXCJmdW5jdGlvblwiLCBpc1NlcmlhbGl6YWJsZSA9ICh0aGluZykgPT4gaXNSZWNvcmQodGhpbmcpID8gdHlwZW9mIHRoaW5nLnNlcmlhbGl6ZSA9PSBcImZ1bmN0aW9uXCIgOiAhMSwgcmV0aHJvd1dpdGhQYW5lUmVzb2x1dGlvbkVycm9ycyA9IChuZXh0KSA9PiAodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXh0KHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgZSBpbnN0YW5jZW9mIFBhbmVSZXNvbHV0aW9uRXJyb3IgPyBlIDogbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgICAgbWVzc2FnZTogdHlwZW9mIGU/Lm1lc3NhZ2UgPT0gXCJzdHJpbmdcIiA/IGUubWVzc2FnZSA6IFwiXCIsXG4gICAgICBjb250ZXh0LFxuICAgICAgY2F1c2U6IGVcbiAgICB9KTtcbiAgfVxufSwgd3JhcFdpdGhQdWJsaXNoUmVwbGF5ID0gKG5leHQpID0+ICguLi5hcmdzKSA9PiBuZXh0KC4uLmFyZ3MpLnBpcGUoXG4gIC8vIG5lZWQgdG8gYWRkIHB1Ymxpc2hSZXBsYXkgKyByZWZDb3VudCB0byBlbnN1cmUgbmV3IHN1YnNjcmliZXJzIGFsd2F5c1xuICAvLyBnZXQgYW4gZW1pc3Npb24uIHdpdGhvdXQgdGhpcywgbWVtb2l6ZWQgb2JzZXJ2YWJsZXMgbWF5IGdldCBzdHVja1xuICAvLyB3YWl0aW5nIGZvciB0aGVpciBmaXJzdCBlbWlzc2lvbnMgcmVzdWx0aW5nIGluIGEgbG9hZGluZyBwYW5lXG4gIHB1Ymxpc2hSZXBsYXkoMSksXG4gIHJlZkNvdW50KClcbik7XG5mdW5jdGlvbiBjcmVhdGVQYW5lUmVzb2x2ZXIobWlkZGxld2FyZSkge1xuICBjb25zdCByZXNvbHZlUGFuZSA9IHJldGhyb3dXaXRoUGFuZVJlc29sdXRpb25FcnJvcnMod3JhcFdpdGhQdWJsaXNoUmVwbGF5KG1pZGRsZXdhcmUoKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICBpZiAoIXVucmVzb2x2ZWRQYW5lKVxuICAgICAgdGhyb3cgbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBcIlBhbmUgcmV0dXJuZWQgbm8gY2hpbGRcIixcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgaGVscElkOiBcInN0cnVjdHVyZS1pdGVtLXJldHVybmVkLW5vLWNoaWxkXCJcbiAgICAgIH0pO1xuICAgIHJldHVybiBpc1Byb21pc2UodW5yZXNvbHZlZFBhbmUpIHx8IGlzT2JzZXJ2YWJsZSh1bnJlc29sdmVkUGFuZSkgPyBmcm9tKHVucmVzb2x2ZWRQYW5lKS5waXBlKHN3aXRjaE1hcCgocmVzdWx0KSA9PiByZXNvbHZlUGFuZShyZXN1bHQsIGNvbnRleHQsIGZsYXRJbmRleCkpKSA6IGlzU2VyaWFsaXphYmxlKHVucmVzb2x2ZWRQYW5lKSA/IHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lLnNlcmlhbGl6ZShjb250ZXh0KSwgY29udGV4dCwgZmxhdEluZGV4KSA6IHR5cGVvZiB1bnJlc29sdmVkUGFuZSA9PSBcImZ1bmN0aW9uXCIgPyByZXNvbHZlUGFuZSh1bnJlc29sdmVkUGFuZShjb250ZXh0LmlkLCBjb250ZXh0KSwgY29udGV4dCwgZmxhdEluZGV4KSA6IG9mKHVucmVzb2x2ZWRQYW5lKTtcbiAgfSkpKTtcbiAgcmV0dXJuIHJlc29sdmVQYW5lO1xufVxuY29uc3QgYmluZENhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBtZW1vQmluZChvYmosIG1ldGhvZEtleSkge1xuICBjb25zdCBib3VuZE1ldGhvZHMgPSBiaW5kQ2FjaGUuZ2V0KG9iaikgfHwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaWYgKGJvdW5kTWV0aG9kcykge1xuICAgIGNvbnN0IGJvdW5kMiA9IGJvdW5kTWV0aG9kcy5nZXQobWV0aG9kS2V5KTtcbiAgICBpZiAoYm91bmQyKSByZXR1cm4gYm91bmQyO1xuICB9XG4gIGNvbnN0IG1ldGhvZCA9IG9ialttZXRob2RLZXldO1xuICBpZiAodHlwZW9mIG1ldGhvZCAhPSBcImZ1bmN0aW9uXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBwcm9wZXJ0eSBcXGAke21ldGhvZEtleX1cXGAgdG8gYmUgYSBmdW5jdGlvbiBidXQgZ290ICR7dHlwZW9mIG1ldGhvZH0gaW5zdGVhZC5gKTtcbiAgY29uc3QgYm91bmQgPSBtZXRob2QuYmluZChvYmopO1xuICByZXR1cm4gYm91bmRNZXRob2RzLnNldChtZXRob2RLZXksIGJvdW5kKSwgYmluZENhY2hlLnNldChvYmosIGJvdW5kTWV0aG9kcyksIGJvdW5kO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVudChvcHRpb25zKSB7XG4gIGNvbnN0IHJlc29sdmVkUGFuZUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgcmVzb2x2ZVBhbmUgPSBjcmVhdGVQYW5lUmVzb2x2ZXIoKG5leHRGbikgPT4gKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICBjb25zdCBrZXkgPSB1bnJlc29sdmVkUGFuZSAmJiBgJHthc3NpZ25JZCh1bnJlc29sdmVkUGFuZSl9LSR7Y29udGV4dC5wYXRoLmpvaW4oXCJfX1wiKX1gLCBjYWNoZWRSZXNvbHZlZFBhbmUgPSBrZXkgJiYgcmVzb2x2ZWRQYW5lQ2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKGNhY2hlZFJlc29sdmVkUGFuZSkgcmV0dXJuIGNhY2hlZFJlc29sdmVkUGFuZTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXh0Rm4odW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgcmV0dXJuIGtleSAmJiByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpLCByZXN1bHQ7XG4gIH0pLCBmYWxsYmFja0VkaXRvclBhbmVzID0gW1t7XG4gICAgaWQ6IGBfX2VkaXRfXyR7b3B0aW9ucy5wYXJhbXMuaWR9YCxcbiAgICBwYXJhbXM6IHtcbiAgICAgIC4uLm9taXQob3B0aW9ucy5wYXJhbXMsIFtcImlkXCJdKSxcbiAgICAgIHR5cGU6IG9wdGlvbnMucGFyYW1zLnR5cGVcbiAgICB9LFxuICAgIHBheWxvYWQ6IG9wdGlvbnMucGF5bG9hZFxuICB9XV07XG4gIGFzeW5jIGZ1bmN0aW9uIHRyYXZlcnNlKHtcbiAgICBjdXJyZW50SWQsXG4gICAgZmxhdEluZGV4LFxuICAgIGludGVudCxcbiAgICBwYXJhbXMsXG4gICAgcGFyZW50OiBwYXJlbnQyLFxuICAgIHBhdGgsXG4gICAgcGF5bG9hZCxcbiAgICB1bnJlc29sdmVkUGFuZSxcbiAgICBsZXZlbEluZGV4LFxuICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgfSkge1xuICAgIGlmICghdW5yZXNvbHZlZFBhbmUpIHJldHVybiBbXTtcbiAgICBjb25zdCB7XG4gICAgICBpZDogdGFyZ2V0SWQsXG4gICAgICB0eXBlOiBzY2hlbWFUeXBlTmFtZSxcbiAgICAgIC4uLm90aGVyUGFyYW1zXG4gICAgfSA9IHBhcmFtcywgcmVzb2x2ZWRQYW5lID0gYXdhaXQgZmlyc3RWYWx1ZUZyb20ocmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUsIHtcbiAgICAgIGlkOiBjdXJyZW50SWQsXG4gICAgICBzcGxpdEluZGV4OiAwLFxuICAgICAgcGFyZW50OiBwYXJlbnQyLFxuICAgICAgcGF0aCxcbiAgICAgIGluZGV4OiBmbGF0SW5kZXgsXG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgcGF5bG9hZDogdm9pZCAwLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH0sIGZsYXRJbmRleCkpO1xuICAgIHJldHVybiByZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJkb2N1bWVudFwiICYmIHJlc29sdmVkUGFuZS5pZCA9PT0gdGFyZ2V0SWQgPyBbe1xuICAgICAgcGFuZXM6IFsuLi5wYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSkubWFwKChpKSA9PiBbe1xuICAgICAgICBpZDogaVxuICAgICAgfV0pLCBbe1xuICAgICAgICBpZDogdGFyZ2V0SWQsXG4gICAgICAgIHBhcmFtczogb3RoZXJQYXJhbXMsXG4gICAgICAgIHBheWxvYWRcbiAgICAgIH1dXSxcbiAgICAgIGRlcHRoSW5kZXg6IHBhdGgubGVuZ3RoLFxuICAgICAgbGV2ZWxJbmRleFxuICAgIH1dIDogKFxuICAgICAgLy8gaWYgdGhlIHJlc29sdmUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIHJldHVybnMgdHJ1ZSwgdGhlbiByZXNvbHZlXG4gICAgICByZXNvbHZlZFBhbmUuY2FuSGFuZGxlSW50ZW50Py4oaW50ZW50LCBwYXJhbXMsIHtcbiAgICAgICAgcGFuZTogcmVzb2x2ZWRQYW5lLFxuICAgICAgICBpbmRleDogZmxhdEluZGV4XG4gICAgICB9KSB8fCAvLyBpZiB0aGUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIGRpZCBub3QgcmV0dXJuIHRydWUsIHRoZW4gbWF0Y2ggYWdhaW5zdFxuICAgICAgLy8gdGhpcyBkZWZhdWx0IGNhc2UuIHdlIHdpbGwgcmVzb2x2ZSB0aGUgaW50ZW50IGlmOlxuICAgICAgcmVzb2x2ZWRQYW5lLnR5cGUgPT09IFwiZG9jdW1lbnRMaXN0XCIgJiYgLy8gMS4gdGhlIHNjaGVtYSB0eXBlIG1hdGNoZXMgKHRoaXMgcmVxdWlyZWQgZm9yIHRoZSBkb2N1bWVudCB0byByZW5kZXIpXG4gICAgICByZXNvbHZlZFBhbmUuc2NoZW1hVHlwZU5hbWUgPT09IHNjaGVtYVR5cGVOYW1lICYmIC8vIDIuIHRoZSBmaWx0ZXIgaXMgdGhlIGRlZmF1bHQgZmlsdGVyLlxuICAgICAgLy9cbiAgICAgIC8vIE5PVEU6IHRoaXMgY2FzZSBpcyB0byBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlIG1hdGNoZXMgd2hlcmUgdGhlIHVzZXJcbiAgICAgIC8vIGhhcyBjb25maWd1cmVkIGEgbW9yZSBzcGVjaWZpYyBmaWx0ZXIgZm9yIGEgcGFydGljdWxhciB0eXBlLiBJbiB0aGF0XG4gICAgICAvLyBjYXNlLCB0aGUgdXNlciBjYW4gaW1wbGVtZW50IHRoZWlyIG93biBgY2FuSGFuZGxlSW50ZW50YCBmdW5jdGlvblxuICAgICAgcmVzb2x2ZWRQYW5lLm9wdGlvbnMuZmlsdGVyID09PSBcIl90eXBlID09ICR0eXBlXCIgPyBbe1xuICAgICAgICBwYW5lczogW1xuICAgICAgICAgIC8vIG1hcCB0aGUgY3VycmVudCBwYXRoIHRvIHJvdXRlciBwYW5lc1xuICAgICAgICAgIC4uLnBhdGgubWFwKChpZCkgPT4gW3tcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgfV0pLFxuICAgICAgICAgIC8vIHRoZW4gYXVnbWVudCB3aXRoIHRoZSBpbnRlbnRzIElEcyBhbmQgcGFyYW1zXG4gICAgICAgICAgW3tcbiAgICAgICAgICAgIGlkOiBwYXJhbXMuaWQsXG4gICAgICAgICAgICBwYXJhbXM6IG90aGVyUGFyYW1zLFxuICAgICAgICAgICAgcGF5bG9hZFxuICAgICAgICAgIH1dXG4gICAgICAgIF0sXG4gICAgICAgIGRlcHRoSW5kZXg6IHBhdGgubGVuZ3RoLFxuICAgICAgICBsZXZlbEluZGV4XG4gICAgICB9XSA6IHJlc29sdmVkUGFuZS50eXBlID09PSBcImxpc3RcIiAmJiByZXNvbHZlZFBhbmUuY2hpbGQgJiYgcmVzb2x2ZWRQYW5lLml0ZW1zID8gKGF3YWl0IFByb21pc2UuYWxsKHJlc29sdmVkUGFuZS5pdGVtcy5tYXAoKGl0ZW0sIG5leHRMZXZlbEluZGV4KSA9PiBpdGVtLnR5cGUgPT09IFwiZGl2aWRlclwiID8gUHJvbWlzZS5yZXNvbHZlKFtdKSA6IHRyYXZlcnNlKHtcbiAgICAgICAgY3VycmVudElkOiBpdGVtLl9pZCB8fCBpdGVtLmlkLFxuICAgICAgICBmbGF0SW5kZXg6IGZsYXRJbmRleCArIDEsXG4gICAgICAgIGludGVudCxcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwYXJlbnQ6IHJlc29sdmVkUGFuZSxcbiAgICAgICAgcGF0aDogWy4uLnBhdGgsIGl0ZW0uaWRdLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgICB1bnJlc29sdmVkUGFuZTogdHlwZW9mIHJlc29sdmVkUGFuZS5jaGlsZCA9PSBcImZ1bmN0aW9uXCIgPyBtZW1vQmluZChyZXNvbHZlZFBhbmUsIFwiY2hpbGRcIikgOiByZXNvbHZlZFBhbmUuY2hpbGQsXG4gICAgICAgIGxldmVsSW5kZXg6IG5leHRMZXZlbEluZGV4LFxuICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICB9KSkpKS5mbGF0KCkgOiBbXVxuICAgICk7XG4gIH1cbiAgY29uc3QgY2xvc2VzdFBhbmVUb1Jvb3QgPSAoYXdhaXQgdHJhdmVyc2Uoe1xuICAgIGN1cnJlbnRJZDogXCJyb290XCIsXG4gICAgZmxhdEluZGV4OiAwLFxuICAgIGxldmVsSW5kZXg6IDAsXG4gICAgaW50ZW50OiBvcHRpb25zLmludGVudCxcbiAgICBwYXJhbXM6IG9wdGlvbnMucGFyYW1zLFxuICAgIHBhcmVudDogbnVsbCxcbiAgICBwYXRoOiBbXSxcbiAgICBwYXlsb2FkOiBvcHRpb25zLnBheWxvYWQsXG4gICAgdW5yZXNvbHZlZFBhbmU6IG9wdGlvbnMucm9vdFBhbmVOb2RlLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IG9wdGlvbnMuc3RydWN0dXJlQ29udGV4dFxuICB9KSkuc29ydCgoYSwgYikgPT4gYS5kZXB0aEluZGV4ID09PSBiLmRlcHRoSW5kZXggPyBhLmxldmVsSW5kZXggLSBiLmxldmVsSW5kZXggOiBhLmRlcHRoSW5kZXggLSBiLmRlcHRoSW5kZXgpWzBdO1xuICByZXR1cm4gY2xvc2VzdFBhbmVUb1Jvb3QgPyBjbG9zZXN0UGFuZVRvUm9vdC5wYW5lcyA6IGZhbGxiYWNrRWRpdG9yUGFuZXM7XG59XG5jb25zdCBmYWxsYmFja0VkaXRvckNoaWxkID0gKG5vZGVJZCwgY29udGV4dCkgPT4ge1xuICBjb25zdCBpZCA9IG5vZGVJZC5yZXBsYWNlKC9eX19lZGl0X18vLCBcIlwiKSwge1xuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IHtcbiAgICAgIHJlc29sdmVEb2N1bWVudE5vZGVcbiAgICB9XG4gIH0gPSBjb250ZXh0LCB7XG4gICAgdHlwZSxcbiAgICB0ZW1wbGF0ZVxuICB9ID0gcGFyYW1zO1xuICBpZiAoIXR5cGUpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCB0eXBlIGZvciBkb2N1bWVudCB3aXRoIElEICR7aWR9IHdhcyBub3QgcHJvdmlkZWQgaW4gdGhlIHJvdXRlciBwYXJhbXMuYCk7XG4gIGxldCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gcmVzb2x2ZURvY3VtZW50Tm9kZSh7XG4gICAgc2NoZW1hVHlwZTogdHlwZSxcbiAgICBkb2N1bWVudElkOiBpZFxuICB9KS5pZChcImVkaXRvclwiKTtcbiAgcmV0dXJuIHRlbXBsYXRlICYmIChkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gZGVmYXVsdERvY3VtZW50QnVpbGRlci5pbml0aWFsVmFsdWVUZW1wbGF0ZSh0ZW1wbGF0ZSwgcGF5bG9hZCkpLCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyLnNlcmlhbGl6ZSgpO1xufTtcbmZ1bmN0aW9uIGhhc2hDb250ZXh0KGNvbnRleHQpIHtcbiAgcmV0dXJuIGBjb250ZXh0SGFzaCgke0pTT04uc3RyaW5naWZ5KHtcbiAgICBpZDogY29udGV4dC5pZCxcbiAgICBwYXJlbnRJZDogcGFyZW50ICYmIGFzc2lnbklkKHBhcmVudCksXG4gICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgIGluZGV4OiBjb250ZXh0LmluZGV4LFxuICAgIHNwbGl0SW5kZXg6IGNvbnRleHQuc3BsaXRJbmRleCxcbiAgICBzZXJpYWxpemVPcHRpb25zSW5kZXg6IGNvbnRleHQuc2VyaWFsaXplT3B0aW9ucz8uaW5kZXgsXG4gICAgc2VyaWFsaXplT3B0aW9uc1BhdGg6IGNvbnRleHQuc2VyaWFsaXplT3B0aW9ucz8ucGF0aFxuICB9KX0pYDtcbn1cbmNvbnN0IGhhc2hSZXNvbHZlZFBhbmVNZXRhID0gKG1ldGEpID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICB0eXBlOiBtZXRhLnR5cGUsXG4gICAgaWQ6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgcGFyYW1zOiBtZXRhLnJvdXRlclBhbmVTaWJsaW5nLnBhcmFtcyB8fCB7fSxcbiAgICBwYXlsb2FkOiBtZXRhLnJvdXRlclBhbmVTaWJsaW5nLnBheWxvYWQgfHwgbnVsbCxcbiAgICBmbGF0SW5kZXg6IG1ldGEuZmxhdEluZGV4LFxuICAgIGdyb3VwSW5kZXg6IG1ldGEuZ3JvdXBJbmRleCxcbiAgICBzaWJsaW5nSW5kZXg6IG1ldGEuc2libGluZ0luZGV4LFxuICAgIHBhdGg6IG1ldGEucGF0aCxcbiAgICBwYW5lTm9kZTogbWV0YS50eXBlID09PSBcInJlc29sdmVkTWV0YVwiID8gYXNzaWduSWQobWV0YS5wYW5lTm9kZSkgOiBudWxsXG4gIH07XG4gIHJldHVybiBgbWV0YUhhc2goJHtKU09OLnN0cmluZ2lmeShub3JtYWxpemVkKX0pYDtcbn07XG5mdW5jdGlvbiByZXNvbHZlUGFuZVRyZWUoe1xuICB1bnJlc29sdmVkUGFuZSxcbiAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gIHBhcmVudDogcGFyZW50MixcbiAgcGF0aCxcbiAgcmVzb2x2ZVBhbmUsXG4gIHN0cnVjdHVyZUNvbnRleHRcbn0pIHtcbiAgY29uc3QgW2N1cnJlbnQsIC4uLnJlc3RdID0gZmxhdHRlbmVkUm91dGVyUGFuZXMsIG5leHQgPSByZXN0WzBdLCBjb250ZXh0ID0ge1xuICAgIGlkOiBjdXJyZW50LnJvdXRlclBhbmVTaWJsaW5nLmlkLFxuICAgIHNwbGl0SW5kZXg6IGN1cnJlbnQuc2libGluZ0luZGV4LFxuICAgIHBhcmVudDogcGFyZW50MixcbiAgICBwYXRoOiBbLi4ucGF0aCwgY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5pZF0sXG4gICAgaW5kZXg6IGN1cnJlbnQuZmxhdEluZGV4LFxuICAgIHBhcmFtczogY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5wYXJhbXMgfHwge30sXG4gICAgcGF5bG9hZDogY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5wYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgfTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGN1cnJlbnQuZmxhdEluZGV4KS5waXBlKFxuICAgICAgLy8gdGhpcyBzd2l0Y2ggbWFwIHJlY2VpdmVzIGEgcmVzb2x2ZWQgcGFuZVxuICAgICAgc3dpdGNoTWFwKChwYW5lTm9kZSkgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlZFBhbmVNZXRhID0ge1xuICAgICAgICAgIHR5cGU6IFwicmVzb2x2ZWRNZXRhXCIsXG4gICAgICAgICAgLi4uY3VycmVudCxcbiAgICAgICAgICBwYW5lTm9kZSxcbiAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGhcbiAgICAgICAgfSwgbG9hZGluZ1BhbmVzID0gcmVzdC5tYXAoKGksIHJlc3RJbmRleCkgPT4gKHtcbiAgICAgICAgICB0eXBlOiBcImxvYWRpbmdcIixcbiAgICAgICAgICBwYXRoOiBbLi4uY29udGV4dC5wYXRoLCAuLi5yZXN0LnNsaWNlKHJlc3RJbmRleCkubWFwKChfLCBjdXJyZW50SW5kZXgpID0+IGBbJHtpLmZsYXRJbmRleCArIGN1cnJlbnRJbmRleH1dYCldLFxuICAgICAgICAgIHBhbmVOb2RlOiBudWxsLFxuICAgICAgICAgIC4uLmlcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAoIXJlc3QubGVuZ3RoKVxuICAgICAgICAgIHJldHVybiBvZihbcmVzb2x2ZWRQYW5lTWV0YV0pO1xuICAgICAgICBsZXQgbmV4dFN0cmVhbTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAvKiB0aGUgZmFsbGJhY2sgZWRpdG9yIGNhc2UgKi9cbiAgICAgICAgICBuZXh0Py5yb3V0ZXJQYW5lU2libGluZy5pZC5zdGFydHNXaXRoKFwiX19lZGl0X19cIikgPyBuZXh0U3RyZWFtID0gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiBmYWxsYmFja0VkaXRvckNoaWxkLFxuICAgICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IHJlc3QsXG4gICAgICAgICAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGgsXG4gICAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgICB9KSA6IGN1cnJlbnQuZ3JvdXBJbmRleCA9PT0gbmV4dD8uZ3JvdXBJbmRleCA/IG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgICAgdW5yZXNvbHZlZFBhbmUsXG4gICAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICAgIHBhcmVudDogcGFyZW50MixcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgICB9KSA6IG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgICAgdW5yZXNvbHZlZFBhbmU6IHR5cGVvZiBwYW5lTm9kZS5jaGlsZCA9PSBcImZ1bmN0aW9uXCIgPyBtZW1vQmluZChwYW5lTm9kZSwgXCJjaGlsZFwiKSA6IHBhbmVOb2RlLmNoaWxkLFxuICAgICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IHJlc3QsXG4gICAgICAgICAgICBwYXJlbnQ6IHBhbmVOb2RlLFxuICAgICAgICAgICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgICAgICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgICAgfSksIGNvbmNhdChcbiAgICAgICAgICAgIC8vIHdlIGVtaXQgdGhlIGxvYWRpbmcgcGFuZXMgZmlyc3QgaW4gYSBjb25jYXQgKHRoaXMgZW1pdHMgaW1tZWRpYXRlbHkpXG4gICAgICAgICAgICBvZihbcmVzb2x2ZWRQYW5lTWV0YSwgLi4ubG9hZGluZ1BhbmVzXSksXG4gICAgICAgICAgICAvLyB0aGVuIHdoZW5ldmVyIHRoZSBuZXh0IHN0cmVhbSBpcyBkb25lLCB0aGUgcmVzdWx0cyB3aWxsIGJlIGNvbWJpbmVkLlxuICAgICAgICAgICAgbmV4dFN0cmVhbS5waXBlKG1hcCgobmV4dFJlc29sdmVkUGFuZXMpID0+IFtyZXNvbHZlZFBhbmVNZXRhLCAuLi5uZXh0UmVzb2x2ZWRQYW5lc10pKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgUGFuZVJlc29sdXRpb25FcnJvciAmJiAoZS5jb250ZXh0ICYmIGNvbnNvbGUud2FybihgUGFuZSByZXNvbHV0aW9uIGVycm9yIGF0IGluZGV4ICR7ZS5jb250ZXh0LmluZGV4fSR7ZS5jb250ZXh0LnNwbGl0SW5kZXggPiAwID8gYCBmb3Igc3BsaXQgcGFuZSBpbmRleCAke2UuY29udGV4dC5zcGxpdEluZGV4fWAgOiBcIlwifTogJHtlLm1lc3NhZ2V9JHtlLmhlbHBJZCA/IGAgLSBzZWUgJHtnZW5lcmF0ZUhlbHBVcmwoZS5oZWxwSWQpfWAgOiBcIlwifWAsIGUpLCBlLmhlbHBJZCA9PT0gXCJzdHJ1Y3R1cmUtaXRlbS1yZXR1cm5lZC1uby1jaGlsZFwiKSlcbiAgICAgIHJldHVybiBvZihbXSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUmVzb2x2ZWRQYW5lTm9kZVN0cmVhbSh7XG4gIHJvdXRlclBhbmVzU3RyZWFtLFxuICByb290UGFuZU5vZGUsXG4gIGluaXRpYWxDYWNoZVN0YXRlID0ge1xuICAgIGNhY2hlS2V5c0J5RmxhdEluZGV4OiBbXSxcbiAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogW10sXG4gICAgcmVzb2x2ZWRQYW5lQ2FjaGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgcmVzb2x2ZVBhbmU6ICgpID0+IE5FVkVSXG4gIH0sXG4gIHN0cnVjdHVyZUNvbnRleHRcbn0pIHtcbiAgcmV0dXJuIHJvdXRlclBhbmVzU3RyZWFtLnBpcGUoXG4gICAgLy8gYWRkIGluIGltcGxpY2l0IFwicm9vdFwiIHJvdXRlciBwYW5lXG4gICAgbWFwKChyYXdSb3V0ZXJQYW5lcykgPT4gW1t7XG4gICAgICBpZDogXCJyb290XCJcbiAgICB9XSwgLi4ucmF3Um91dGVyUGFuZXNdKSxcbiAgICAvLyBjcmVhdGUgZmxhdHRlbmVkIHJvdXRlciBwYW5lc1xuICAgIG1hcCgocm91dGVyUGFuZXMpID0+IHJvdXRlclBhbmVzLmZsYXRNYXAoKHJvdXRlclBhbmVHcm91cCwgZ3JvdXBJbmRleCkgPT4gcm91dGVyUGFuZUdyb3VwLm1hcCgocm91dGVyUGFuZVNpYmxpbmcsIHNpYmxpbmdJbmRleCkgPT4gKHtcbiAgICAgIHJvdXRlclBhbmVTaWJsaW5nLFxuICAgICAgZ3JvdXBJbmRleCxcbiAgICAgIHNpYmxpbmdJbmRleFxuICAgIH0pKSkubWFwKChpLCBpbmRleCkgPT4gKHtcbiAgICAgIC4uLmksXG4gICAgICBmbGF0SW5kZXg6IGluZGV4XG4gICAgfSkpKSxcbiAgICAvLyBjYWxjdWxhdGUgYSBcImRpZmZJbmRleFwiIHVzZWQgZm9yIGNsZWFyaW5nIHRoZSBtZW1vIGNhY2hlXG4gICAgc3RhcnRXaXRoKFtdKSxcbiAgICBwYWlyd2lzZSgpLFxuICAgIG1hcCgoW3ByZXYsIGN1cnJdKSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJldlZhbHVlID0gcHJldltpXSwgY3VyclZhbHVlID0gY3VycltpXTtcbiAgICAgICAgaWYgKCFpc0VxdWFsKHByZXZWYWx1ZSwgY3VyclZhbHVlKSlcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IGN1cnIsXG4gICAgICAgICAgICBkaWZmSW5kZXg6IGlcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IGN1cnIsXG4gICAgICAgIGRpZmZJbmRleDogY3Vyci5sZW5ndGhcbiAgICAgIH07XG4gICAgfSksXG4gICAgLy8gY3JlYXRlIHRoZSBtZW1vaXplZCBgcmVzb2x2ZVBhbmVgIGZ1bmN0aW9uIGFuZCBtYW5hZ2UgdGhlIG1lbW8gY2FjaGVcbiAgICBzY2FuKChhY2MsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY2FjaGVLZXlzQnlGbGF0SW5kZXgsXG4gICAgICAgIHJlc29sdmVkUGFuZUNhY2hlXG4gICAgICB9ID0gYWNjLCB7XG4gICAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgICBkaWZmSW5kZXhcbiAgICAgIH0gPSBuZXh0LCBiZWZvcmVEaWZmSW5kZXggPSBjYWNoZUtleXNCeUZsYXRJbmRleC5zbGljZSgwLCBkaWZmSW5kZXggKyAxKSwgYWZ0ZXJEaWZmSW5kZXggPSBjYWNoZUtleXNCeUZsYXRJbmRleC5zbGljZShkaWZmSW5kZXggKyAxKSwga2V5c1RvS2VlcCA9IG5ldyBTZXQoYmVmb3JlRGlmZkluZGV4LmZsYXRNYXAoKGtleVNldCkgPT4gQXJyYXkuZnJvbShrZXlTZXQpKSksIGtleXNUb0RlbGV0ZSA9IGFmdGVyRGlmZkluZGV4LmZsYXRNYXAoKGtleVNldCkgPT4gQXJyYXkuZnJvbShrZXlTZXQpKS5maWx0ZXIoKGtleSkgPT4gIWtleXNUb0tlZXAuaGFzKGtleSkpO1xuICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5c1RvRGVsZXRlKVxuICAgICAgICByZXNvbHZlZFBhbmVDYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgICBjYWNoZUtleXNCeUZsYXRJbmRleCxcbiAgICAgICAgcmVzb2x2ZWRQYW5lQ2FjaGUsXG4gICAgICAgIHJlc29sdmVQYW5lOiBjcmVhdGVQYW5lUmVzb2x2ZXIoKG5leHRGbikgPT4gKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBrZXkgPSB1bnJlc29sdmVkUGFuZSAmJiBgJHthc3NpZ25JZCh1bnJlc29sdmVkUGFuZSl9LSR7aGFzaENvbnRleHQoY29udGV4dCl9YCwgY2FjaGVkUmVzb2x2ZWRQYW5lID0ga2V5ICYmIHJlc29sdmVkUGFuZUNhY2hlLmdldChrZXkpO1xuICAgICAgICAgIGlmIChjYWNoZWRSZXNvbHZlZFBhbmUpIHJldHVybiBjYWNoZWRSZXNvbHZlZFBhbmU7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dEZuKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICAgICAgICAgIGlmICgha2V5KSByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIGNvbnN0IGNhY2hlS2V5U2V0ID0gY2FjaGVLZXlzQnlGbGF0SW5kZXhbZmxhdEluZGV4XSB8fCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgICAgIHJldHVybiBjYWNoZUtleVNldC5hZGQoa2V5KSwgY2FjaGVLZXlzQnlGbGF0SW5kZXhbZmxhdEluZGV4XSA9IGNhY2hlS2V5U2V0LCByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpLCByZXN1bHQ7XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH0sIGluaXRpYWxDYWNoZVN0YXRlKSxcbiAgICAvLyBydW4gdGhlIG1lbW9pemVkLCByZWN1cnNpdmUgcmVzb2x2aW5nXG4gICAgc3dpdGNoTWFwKCh7XG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIHJlc29sdmVQYW5lXG4gICAgfSkgPT4gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgIHVucmVzb2x2ZWRQYW5lOiByb290UGFuZU5vZGUsXG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgIHBhdGg6IFtdLFxuICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSkpXG4gICkucGlwZShcbiAgICAvLyB0aGlzIGRpZmZzIHRoZSBwcmV2aW91cyBlbWlzc2lvbiB3aXRoIHRoZSBjdXJyZW50IG9uZS4gaWYgdGhlcmUgaXMgYSBuZXdcbiAgICAvLyBsb2FkaW5nIHBhbmUgYXQgdGhlIHNhbWUgcG9zaXRpb24gd2hlcmUgYSBwcmV2aW91cyBwYW5lIGFscmVhZHkgaGFkIGFcbiAgICAvLyByZXNvbHZlZCB2YWx1ZSAobG9va2luZyBhdCB0aGUgSURzIHRvIGNvbXBhcmUpLCB0aGVuIHJldHVybiB0aGUgcHJldmlvdXNcbiAgICAvLyBwYW5lIGluc3RlYWQgb2YgdGhlIGxvYWRpbmcgcGFuZVxuICAgIHNjYW4oKHByZXYsIG5leHQpID0+IG5leHQubWFwKChuZXh0UGFuZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHByZXZQYW5lID0gcHJldltpbmRleF07XG4gICAgICByZXR1cm4gIXByZXZQYW5lIHx8IG5leHRQYW5lLnR5cGUgIT09IFwibG9hZGluZ1wiID8gbmV4dFBhbmUgOiBwcmV2UGFuZS5yb3V0ZXJQYW5lU2libGluZy5pZCA9PT0gbmV4dFBhbmUucm91dGVyUGFuZVNpYmxpbmcuaWQgPyBwcmV2UGFuZSA6IG5leHRQYW5lO1xuICAgIH0pLCBbXSksXG4gICAgLy8gdGhpcyBwcmV2ZW50cyBkdXBsaWNhdGUgZW1pc3Npb25zXG4gICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKHByZXYsIG5leHQpID0+IHtcbiAgICAgIGlmIChwcmV2Lmxlbmd0aCAhPT0gbmV4dC5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwcmV2VmFsdWUgPSBwcmV2W2ldLCBuZXh0VmFsdWUgPSBuZXh0W2ldO1xuICAgICAgICBpZiAoaGFzaFJlc29sdmVkUGFuZU1ldGEocHJldlZhbHVlKSAhPT0gaGFzaFJlc29sdmVkUGFuZU1ldGEobmV4dFZhbHVlKSlcbiAgICAgICAgICByZXR1cm4gITE7XG4gICAgICB9XG4gICAgICByZXR1cm4gITA7XG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIHVzZVJvdXRlclBhbmVzU3RyZWFtKCkge1xuICBjb25zdCAkID0gYyg2KSwgW3JvdXRlclN0YXRlU3ViamVjdF0gPSB1c2VTdGF0ZShfdGVtcCQ1KTtcbiAgbGV0IHQwO1xuICAkWzBdICE9PSByb3V0ZXJTdGF0ZVN1YmplY3QgPyAodDAgPSByb3V0ZXJTdGF0ZVN1YmplY3QuYXNPYnNlcnZhYmxlKCkucGlwZShtYXAoX3RlbXAyJDMpKSwgJFswXSA9IHJvdXRlclN0YXRlU3ViamVjdCwgJFsxXSA9IHQwKSA6IHQwID0gJFsxXTtcbiAgY29uc3Qgcm91dGVyUGFuZXMkID0gdDAsIHtcbiAgICBzdGF0ZTogcm91dGVyU3RhdGVcbiAgfSA9IHVzZVJvdXRlcigpO1xuICBsZXQgdDEsIHQyO1xuICByZXR1cm4gJFsyXSAhPT0gcm91dGVyU3RhdGUgfHwgJFszXSAhPT0gcm91dGVyU3RhdGVTdWJqZWN0ID8gKHQxID0gKCkgPT4ge1xuICAgIHJvdXRlclN0YXRlU3ViamVjdC5uZXh0KHJvdXRlclN0YXRlKTtcbiAgfSwgdDIgPSBbcm91dGVyU3RhdGUsIHJvdXRlclN0YXRlU3ViamVjdF0sICRbMl0gPSByb3V0ZXJTdGF0ZSwgJFszXSA9IHJvdXRlclN0YXRlU3ViamVjdCwgJFs0XSA9IHQxLCAkWzVdID0gdDIpIDogKHQxID0gJFs0XSwgdDIgPSAkWzVdKSwgdXNlRWZmZWN0KHQxLCB0MiksIHJvdXRlclBhbmVzJDtcbn1cbmZ1bmN0aW9uIF90ZW1wMiQzKF9yb3V0ZXJTdGF0ZSkge1xuICByZXR1cm4gX3JvdXRlclN0YXRlPy5wYW5lcyB8fCBbXTtcbn1cbmZ1bmN0aW9uIF90ZW1wJDUoKSB7XG4gIHJldHVybiBuZXcgUmVwbGF5U3ViamVjdCgxKTtcbn1cbmZ1bmN0aW9uIHVzZVJlc29sdmVkUGFuZXMoKSB7XG4gIGNvbnN0ICQgPSBjKDE1KSwgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgpLCBbbWF4aW1pemVkUGFuZSwgc2V0TWF4aW1pemVkUGFuZV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgaWYgKGVycm9yKVxuICAgIHRocm93IGVycm9yO1xuICBjb25zdCB7XG4gICAgc3RydWN0dXJlQ29udGV4dCxcbiAgICByb290UGFuZU5vZGVcbiAgfSA9IHVzZVN0cnVjdHVyZVRvb2woKTtcbiAgbGV0IHQwO1xuICAkWzBdID09PSAvKiBAX19QVVJFX18gKi8gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDAgPSB7XG4gICAgcGFuZURhdGFJdGVtczogW10sXG4gICAgcmVzb2x2ZWRQYW5lczogW10sXG4gICAgcm91dGVyUGFuZXM6IFtdXG4gIH0sICRbMF0gPSB0MCkgOiB0MCA9ICRbMF07XG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKHQwKSwgcm91dGVyUGFuZXNTdHJlYW0gPSB1c2VSb3V0ZXJQYW5lc1N0cmVhbSgpO1xuICBsZXQgdDEsIHQyO1xuICAkWzFdICE9PSByb290UGFuZU5vZGUgfHwgJFsyXSAhPT0gcm91dGVyUGFuZXNTdHJlYW0gfHwgJFszXSAhPT0gc3RydWN0dXJlQ29udGV4dCA/ICh0MSA9ICgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBjcmVhdGVSZXNvbHZlZFBhbmVOb2RlU3RyZWFtKHtcbiAgICAgIHJvb3RQYW5lTm9kZSxcbiAgICAgIHJvdXRlclBhbmVzU3RyZWFtLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH0pLnBpcGUobWFwKF90ZW1wNSQxKSkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChyZXN1bHQpID0+IHNldERhdGEocmVzdWx0KSxcbiAgICAgIGVycm9yOiAoZSkgPT4gc2V0RXJyb3IoZSlcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH0sIHQyID0gW3Jvb3RQYW5lTm9kZSwgcm91dGVyUGFuZXNTdHJlYW0sIHN0cnVjdHVyZUNvbnRleHRdLCAkWzFdID0gcm9vdFBhbmVOb2RlLCAkWzJdID0gcm91dGVyUGFuZXNTdHJlYW0sICRbM10gPSBzdHJ1Y3R1cmVDb250ZXh0LCAkWzRdID0gdDEsICRbNV0gPSB0MikgOiAodDEgPSAkWzRdLCB0MiA9ICRbNV0pLCB1c2VFZmZlY3QodDEsIHQyKTtcbiAgbGV0IHQzO1xuICBpZiAoJFs2XSAhPT0gZGF0YS5wYW5lRGF0YUl0ZW1zIHx8ICRbN10gIT09IG1heGltaXplZFBhbmUpIHtcbiAgICBsZXQgdDQyO1xuICAgICRbOV0gIT09IG1heGltaXplZFBhbmUgPyAodDQyID0gKGl0ZW0pID0+ICh7XG4gICAgICAuLi5pdGVtLFxuICAgICAgbWF4aW1pemVkOiBtYXhpbWl6ZWRQYW5lID8gaXRlbS5rZXkgPT09IG1heGltaXplZFBhbmUua2V5IDogITFcbiAgICB9KSwgJFs5XSA9IG1heGltaXplZFBhbmUsICRbMTBdID0gdDQyKSA6IHQ0MiA9ICRbMTBdLCB0MyA9IGRhdGEucGFuZURhdGFJdGVtcy5tYXAodDQyKSwgJFs2XSA9IGRhdGEucGFuZURhdGFJdGVtcywgJFs3XSA9IG1heGltaXplZFBhbmUsICRbOF0gPSB0MztcbiAgfSBlbHNlXG4gICAgdDMgPSAkWzhdO1xuICBjb25zdCBwYW5lRGF0YUl0ZW1zV2l0aE1heGltaXplZCA9IHQzO1xuICBsZXQgdDQ7XG4gIHJldHVybiAkWzExXSAhPT0gZGF0YSB8fCAkWzEyXSAhPT0gbWF4aW1pemVkUGFuZSB8fCAkWzEzXSAhPT0gcGFuZURhdGFJdGVtc1dpdGhNYXhpbWl6ZWQgPyAodDQgPSB7XG4gICAgLi4uZGF0YSxcbiAgICBwYW5lRGF0YUl0ZW1zOiBwYW5lRGF0YUl0ZW1zV2l0aE1heGltaXplZCxcbiAgICBtYXhpbWl6ZWRQYW5lLFxuICAgIHNldE1heGltaXplZFBhbmVcbiAgfSwgJFsxMV0gPSBkYXRhLCAkWzEyXSA9IG1heGltaXplZFBhbmUsICRbMTNdID0gcGFuZURhdGFJdGVtc1dpdGhNYXhpbWl6ZWQsICRbMTRdID0gdDQpIDogdDQgPSAkWzE0XSwgdDQ7XG59XG5mdW5jdGlvbiBfdGVtcDUkMShyZXNvbHZlZFBhbmVzKSB7XG4gIGNvbnN0IHJvdXRlclBhbmVzID0gcmVzb2x2ZWRQYW5lcy5yZWR1Y2UoX3RlbXAzJDEsIFtdKSwgZ3JvdXBzTGVuID0gcm91dGVyUGFuZXMubGVuZ3RoLCBwYW5lRGF0YUl0ZW1zID0gcmVzb2x2ZWRQYW5lcy5tYXAoKHBhbmUpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBncm91cEluZGV4LFxuICAgICAgZmxhdEluZGV4LFxuICAgICAgc2libGluZ0luZGV4LFxuICAgICAgcm91dGVyUGFuZVNpYmxpbmcsXG4gICAgICBwYXRoXG4gICAgfSA9IHBhbmUsIGl0ZW1JZCA9IHJvdXRlclBhbmVTaWJsaW5nLmlkLCBuZXh0R3JvdXAgPSByb3V0ZXJQYW5lc1tncm91cEluZGV4ICsgMV07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZTogZ3JvdXBJbmRleCA9PT0gZ3JvdXBzTGVuIC0gMixcbiAgICAgIGNoaWxkSXRlbUlkOiBuZXh0R3JvdXA/LlswXS5pZCA/PyBudWxsLFxuICAgICAgaW5kZXg6IGZsYXRJbmRleCxcbiAgICAgIGl0ZW1JZDogcm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgICBncm91cEluZGV4LFxuICAgICAga2V5OiBgJHtwYW5lLnR5cGUgPT09IFwibG9hZGluZ1wiID8gXCJ1bmtub3duXCIgOiBwYW5lLnBhbmVOb2RlLmlkfS0ke2l0ZW1JZH0tJHtzaWJsaW5nSW5kZXh9YCxcbiAgICAgIHBhbmU6IHBhbmUudHlwZSA9PT0gXCJsb2FkaW5nXCIgPyBMT0FESU5HX1BBTkUgOiBwYW5lLnBhbmVOb2RlLFxuICAgICAgcGFyYW1zOiByb3V0ZXJQYW5lU2libGluZy5wYXJhbXMgfHwge30sXG4gICAgICBwYXRoOiBwYXRoLmpvaW4oXCI7XCIpLFxuICAgICAgcGF5bG9hZDogcm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCxcbiAgICAgIHNlbGVjdGVkOiBmbGF0SW5kZXggPT09IHJlc29sdmVkUGFuZXMubGVuZ3RoIC0gMSxcbiAgICAgIHNpYmxpbmdJbmRleCxcbiAgICAgIG1heGltaXplZDogITFcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBwYW5lRGF0YUl0ZW1zLFxuICAgIHJvdXRlclBhbmVzLFxuICAgIHJlc29sdmVkUGFuZXM6IHBhbmVEYXRhSXRlbXMubWFwKF90ZW1wNCQxKVxuICB9O1xufVxuZnVuY3Rpb24gX3RlbXA0JDEocGFuZV8wKSB7XG4gIHJldHVybiBwYW5lXzAucGFuZTtcbn1cbmZ1bmN0aW9uIF90ZW1wMyQxKGFjYywgbmV4dCkge1xuICBjb25zdCBjdXJyZW50R3JvdXAgPSBhY2NbbmV4dC5ncm91cEluZGV4XSB8fCBbXTtcbiAgcmV0dXJuIGN1cnJlbnRHcm91cFtuZXh0LnNpYmxpbmdJbmRleF0gPSBuZXh0LnJvdXRlclBhbmVTaWJsaW5nLCBhY2NbbmV4dC5ncm91cEluZGV4XSA9IGN1cnJlbnRHcm91cCwgYWNjO1xufVxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRG9jdW1lbnRJZEFuZFR5cGUoZG9jdW1lbnRTdG9yZSwgaWQsIHR5cGUpIHtcbiAgaWYgKGlkICYmIHR5cGUpIHJldHVybiB7XG4gICAgaWQsXG4gICAgdHlwZVxuICB9O1xuICBpZiAoIWlkICYmIHR5cGUpIHJldHVybiB7XG4gICAgaWQ6IHV1aWQoKSxcbiAgICB0eXBlXG4gIH07XG4gIGlmIChpZCAmJiAhdHlwZSkge1xuICAgIGNvbnN0IHJlc29sdmVkVHlwZSA9IGF3YWl0IGZpcnN0VmFsdWVGcm9tKGRvY3VtZW50U3RvcmUucmVzb2x2ZVR5cGVGb3JEb2N1bWVudChpZCkpO1xuICAgIHJldHVybiB7XG4gICAgICBpZCxcbiAgICAgIHR5cGU6IHJlc29sdmVkVHlwZVxuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgIG1lc3NhZ2U6IFwiTmVpdGhlciBkb2N1bWVudCBgaWRgIG9yIGB0eXBlYCB3YXMgcHJvdmlkZWQgd2hlbiB0cnlpbmcgdG8gcmVzb2x2ZSBpbnRlbnQuXCJcbiAgfSk7XG59XG5jb25zdCBFTVBUWV9SRUNPUkQgPSB7fSwgSW50ZW50UmVzb2x2ZXIgPSBtZW1vKGZ1bmN0aW9uKCkge1xuICBjb25zdCAkID0gYyg3KSwge1xuICAgIG5hdmlnYXRlXG4gIH0gPSB1c2VSb3V0ZXIoKSwgbWF5YmVJbnRlbnQgPSB1c2VSb3V0ZXJTdGF0ZShfdGVtcCQ0KSwge1xuICAgIHJvb3RQYW5lTm9kZSxcbiAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gIH0gPSB1c2VTdHJ1Y3R1cmVUb29sKCksIGRvY3VtZW50U3RvcmUgPSB1c2VEb2N1bWVudFN0b3JlKCksIFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG4gIGlmIChlcnJvcilcbiAgICB0aHJvdyBlcnJvcjtcbiAgbGV0IHQwLCB0MTtcbiAgcmV0dXJuICRbMF0gIT09IGRvY3VtZW50U3RvcmUgfHwgJFsxXSAhPT0gbWF5YmVJbnRlbnQgfHwgJFsyXSAhPT0gbmF2aWdhdGUgfHwgJFszXSAhPT0gcm9vdFBhbmVOb2RlIHx8ICRbNF0gIT09IHN0cnVjdHVyZUNvbnRleHQgPyAodDAgPSAoKSA9PiB7XG4gICAgaWYgKG1heWJlSW50ZW50KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGludGVudCxcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwYXlsb2FkXG4gICAgICB9ID0gbWF5YmVJbnRlbnQ7XG4gICAgICBsZXQgY2FuY2VsbGVkID0gITE7XG4gICAgICByZXR1cm4gKGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdHlwZVxuICAgICAgICB9ID0gYXdhaXQgZW5zdXJlRG9jdW1lbnRJZEFuZFR5cGUoZG9jdW1lbnRTdG9yZSwgdHlwZW9mIHBhcmFtcy5pZCA9PSBcInN0cmluZ1wiID8gcGFyYW1zLmlkIDogdm9pZCAwLCB0eXBlb2YgcGFyYW1zLnR5cGUgPT0gXCJzdHJpbmdcIiA/IHBhcmFtcy50eXBlIDogdm9pZCAwKTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHBhbmVzID0gYXdhaXQgcmVzb2x2ZUludGVudCh7XG4gICAgICAgICAgaW50ZW50LFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIHJvb3RQYW5lTm9kZSxcbiAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxsZWQgfHwgbmF2aWdhdGUoe1xuICAgICAgICAgIHBhbmVzXG4gICAgICAgIH0sIHtcbiAgICAgICAgICByZXBsYWNlOiAhMFxuICAgICAgICB9KTtcbiAgICAgIH0pKCkuY2F0Y2goc2V0RXJyb3IpLCAoKSA9PiB7XG4gICAgICAgIGNhbmNlbGxlZCA9ICEwO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHQxID0gW2RvY3VtZW50U3RvcmUsIG1heWJlSW50ZW50LCBuYXZpZ2F0ZSwgcm9vdFBhbmVOb2RlLCBzdHJ1Y3R1cmVDb250ZXh0XSwgJFswXSA9IGRvY3VtZW50U3RvcmUsICRbMV0gPSBtYXliZUludGVudCwgJFsyXSA9IG5hdmlnYXRlLCAkWzNdID0gcm9vdFBhbmVOb2RlLCAkWzRdID0gc3RydWN0dXJlQ29udGV4dCwgJFs1XSA9IHQwLCAkWzZdID0gdDEpIDogKHQwID0gJFs1XSwgdDEgPSAkWzZdKSwgdXNlRWZmZWN0KHQwLCB0MSksIG51bGw7XG59KTtcbmZ1bmN0aW9uIF90ZW1wJDQocm91dGVyU3RhdGUpIHtcbiAgY29uc3QgaW50ZW50TmFtZSA9IHR5cGVvZiByb3V0ZXJTdGF0ZS5pbnRlbnQgPT0gXCJzdHJpbmdcIiA/IHJvdXRlclN0YXRlLmludGVudCA6IHZvaWQgMDtcbiAgcmV0dXJuIGludGVudE5hbWUgPyB7XG4gICAgaW50ZW50OiBpbnRlbnROYW1lLFxuICAgIHBhcmFtczogaXNSZWNvcmQocm91dGVyU3RhdGUucGFyYW1zKSA/IHJvdXRlclN0YXRlLnBhcmFtcyA6IEVNUFRZX1JFQ09SRCxcbiAgICBwYXlsb2FkOiByb3V0ZXJTdGF0ZS5wYXlsb2FkXG4gIH0gOiB2b2lkIDA7XG59XG5jb25zdCBQYXRoU2VnbWVudCA9IHN0eWxlZC5zcGFuYFxuICAmOm5vdCg6bGFzdC1jaGlsZCk6OmFmdGVyIHtcbiAgICBjb250ZW50OiAnIOKenSAnO1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgfVxuYDtcbmZ1bmN0aW9uIGZvcm1hdFN0YWNrKHN0YWNrKSB7XG4gIHJldHVybiBzdGFjay5yZXBsYWNlKC9cXChcXC5cXC5cXC5cXClcXC4vZywgYCguLi4pXG4gIC5gKS5yZXBsYWNlKC9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFX1xcZCtfKy9nLCBcIlwiKS5yZXBsYWNlKC9fX19kZWZhdWx0XFwuL2csIFwiLlwiKS5yZXBsYWNlKG5ldyBSZWdFeHAoYCBcXFxcKGh0dHBzPzpcXFxcL1xcXFwvJHt3aW5kb3cubG9jYXRpb24uaG9zdH1gLCBcImdcIiksIFwiIChcIik7XG59XG5mdW5jdGlvbiBTdHJ1Y3R1cmVFcnJvcih0MCkge1xuICBjb25zdCAkID0gYyg3NCksIHtcbiAgICBlcnJvclxuICB9ID0gdDA7XG4gIGlmICghKGVycm9yIGluc3RhbmNlb2YgUGFuZVJlc29sdXRpb25FcnJvcikpXG4gICAgdGhyb3cgZXJyb3I7XG4gIGNvbnN0IHtcbiAgICBjYXVzZVxuICB9ID0gZXJyb3IsIHtcbiAgICB0XG4gIH0gPSB1c2VUcmFuc2xhdGlvbihzdHJ1Y3R1cmVMb2NhbGVOYW1lc3BhY2UpLCBzdGFjayA9IGNhdXNlPy5zdGFjayB8fCBlcnJvci5zdGFjaztcbiAgbGV0IHQxO1xuICAkWzBdICE9PSBjYXVzZSB8fCAkWzFdICE9PSBlcnJvci5tZXNzYWdlIHx8ICRbMl0gIT09IHN0YWNrID8gKHQxID0gc3RhY2sgJiYgIShjYXVzZSBpbnN0YW5jZW9mIFNlcmlhbGl6ZUVycm9yKSAmJiAhZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcIk1vZHVsZSBidWlsZCBmYWlsZWQ6XCIpLCAkWzBdID0gY2F1c2UsICRbMV0gPSBlcnJvci5tZXNzYWdlLCAkWzJdID0gc3RhY2ssICRbM10gPSB0MSkgOiB0MSA9ICRbM107XG4gIGNvbnN0IHNob3dTdGFjayA9IHQxO1xuICBsZXQgVDAsIFQxLCBUMiwgaGFuZGxlUmVsb2FkLCBoZWxwSWQsIHQxMCwgdDExLCB0MTIsIHQxMywgdDE0LCB0MiwgdDMsIHQ0LCB0NSwgdDYsIHQ3LCB0OCwgdDk7XG4gIGlmICgkWzRdICE9PSBjYXVzZSB8fCAkWzVdICE9PSBlcnJvci5oZWxwSWQgfHwgJFs2XSAhPT0gdCkge1xuICAgIGNvbnN0IHBhdGggPSBjYXVzZSBpbnN0YW5jZW9mIFNlcmlhbGl6ZUVycm9yID8gY2F1c2UucGF0aCA6IFtdO1xuICAgIGhlbHBJZCA9IGNhdXNlIGluc3RhbmNlb2YgU2VyaWFsaXplRXJyb3IgJiYgY2F1c2UuaGVscElkIHx8IGVycm9yLmhlbHBJZCwgaGFuZGxlUmVsb2FkID0gX3RlbXAkMywgVDIgPSBDYXJkLCB0MTAgPSBcImZpbGxcIiwgdDExID0gXCJhdXRvXCIsIHQxMiA9IDQsIHQxMyA9IFwiYm9yZGVyXCIsIHQxNCA9IFwiY3JpdGljYWxcIiwgVDEgPSBDb250YWluZXI7XG4gICAgbGV0IHQxNTI7XG4gICAgJFsyNV0gIT09IHQgPyAodDE1MiA9IHQoXCJzdHJ1Y3R1cmUtZXJyb3IuaGVhZGVyLnRleHRcIiksICRbMjVdID0gdCwgJFsyNl0gPSB0MTUyKSA6IHQxNTIgPSAkWzI2XSwgJFsyN10gIT09IHQxNTIgPyAodDkgPSAvKiBAX19QVVJFX18gKi8ganN4KEhlYWRpbmcsIHsgYXM6IFwiaDJcIiwgY2hpbGRyZW46IHQxNTIgfSksICRbMjddID0gdDE1MiwgJFsyOF0gPSB0OSkgOiB0OSA9ICRbMjhdLCBUMCA9IENhcmQsIHQyID0gNCwgdDMgPSA0LCB0NCA9IDIsIHQ1ID0gXCJhdXRvXCIsIHQ2ID0gMSwgdDcgPSBcImluaGVyaXRcIiwgdDggPSBwYXRoLmxlbmd0aCA+IDAgJiYgLyogQF9fUFVSRV9fICovIGpzeHMoU3RhY2ssIHsgc3BhY2U6IDIsIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgc2l6ZTogMSwgd2VpZ2h0OiBcIm1lZGl1bVwiLCBjaGlsZHJlbjogdChcInN0cnVjdHVyZS1lcnJvci5zdHJ1Y3R1cmUtcGF0aC5sYWJlbFwiKSB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goQ29kZSwgeyBjaGlsZHJlbjogcGF0aC5zbGljZSgxKS5tYXAoX3RlbXAyJDIpIH0pXG4gICAgXSB9KSwgJFs0XSA9IGNhdXNlLCAkWzVdID0gZXJyb3IuaGVscElkLCAkWzZdID0gdCwgJFs3XSA9IFQwLCAkWzhdID0gVDEsICRbOV0gPSBUMiwgJFsxMF0gPSBoYW5kbGVSZWxvYWQsICRbMTFdID0gaGVscElkLCAkWzEyXSA9IHQxMCwgJFsxM10gPSB0MTEsICRbMTRdID0gdDEyLCAkWzE1XSA9IHQxMywgJFsxNl0gPSB0MTQsICRbMTddID0gdDIsICRbMThdID0gdDMsICRbMTldID0gdDQsICRbMjBdID0gdDUsICRbMjFdID0gdDYsICRbMjJdID0gdDcsICRbMjNdID0gdDgsICRbMjRdID0gdDk7XG4gIH0gZWxzZVxuICAgIFQwID0gJFs3XSwgVDEgPSAkWzhdLCBUMiA9ICRbOV0sIGhhbmRsZVJlbG9hZCA9ICRbMTBdLCBoZWxwSWQgPSAkWzExXSwgdDEwID0gJFsxMl0sIHQxMSA9ICRbMTNdLCB0MTIgPSAkWzE0XSwgdDEzID0gJFsxNV0sIHQxNCA9ICRbMTZdLCB0MiA9ICRbMTddLCB0MyA9ICRbMThdLCB0NCA9ICRbMTldLCB0NSA9ICRbMjBdLCB0NiA9ICRbMjFdLCB0NyA9ICRbMjJdLCB0OCA9ICRbMjNdLCB0OSA9ICRbMjRdO1xuICBsZXQgdDE1O1xuICAkWzI5XSAhPT0gdCA/ICh0MTUgPSB0KFwic3RydWN0dXJlLWVycm9yLmVycm9yLmxhYmVsXCIpLCAkWzI5XSA9IHQsICRbMzBdID0gdDE1KSA6IHQxNSA9ICRbMzBdO1xuICBsZXQgdDE2O1xuICAkWzMxXSAhPT0gdDE1ID8gKHQxNiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goVGV4dCwgeyBzaXplOiAxLCB3ZWlnaHQ6IFwibWVkaXVtXCIsIGNoaWxkcmVuOiB0MTUgfSksICRbMzFdID0gdDE1LCAkWzMyXSA9IHQxNikgOiB0MTYgPSAkWzMyXTtcbiAgbGV0IHQxNztcbiAgJFszM10gIT09IGVycm9yLm1lc3NhZ2UgfHwgJFszNF0gIT09IHNob3dTdGFjayB8fCAkWzM1XSAhPT0gc3RhY2sgPyAodDE3ID0gc2hvd1N0YWNrID8gZm9ybWF0U3RhY2soc3RhY2spIDogZXJyb3IubWVzc2FnZSwgJFszM10gPSBlcnJvci5tZXNzYWdlLCAkWzM0XSA9IHNob3dTdGFjaywgJFszNV0gPSBzdGFjaywgJFszNl0gPSB0MTcpIDogdDE3ID0gJFszNl07XG4gIGxldCB0MTg7XG4gICRbMzddICE9PSB0MTcgPyAodDE4ID0gLyogQF9fUFVSRV9fICovIGpzeChDb2RlLCB7IGNoaWxkcmVuOiB0MTcgfSksICRbMzddID0gdDE3LCAkWzM4XSA9IHQxOCkgOiB0MTggPSAkWzM4XTtcbiAgbGV0IHQxOTtcbiAgJFszOV0gIT09IHQxNiB8fCAkWzQwXSAhPT0gdDE4ID8gKHQxOSA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFN0YWNrLCB7IG1hcmdpblRvcDogNCwgc3BhY2U6IDIsIGNoaWxkcmVuOiBbXG4gICAgdDE2LFxuICAgIHQxOFxuICBdIH0pLCAkWzM5XSA9IHQxNiwgJFs0MF0gPSB0MTgsICRbNDFdID0gdDE5KSA6IHQxOSA9ICRbNDFdO1xuICBsZXQgdDIwO1xuICAkWzQyXSAhPT0gaGVscElkIHx8ICRbNDNdICE9PSB0ID8gKHQyMCA9IGhlbHBJZCAmJiAvKiBAX19QVVJFX18gKi8ganN4KEJveCwgeyBtYXJnaW5Ub3A6IDQsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJhXCIsIHsgaHJlZjogZ2VuZXJhdGVIZWxwVXJsKGhlbHBJZCksIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsIHRhcmdldDogXCJfYmxhbmtcIiwgY2hpbGRyZW46IHQoXCJzdHJ1Y3R1cmUtZXJyb3IuZG9jcy1saW5rLnRleHRcIikgfSkgfSkgfSksICRbNDJdID0gaGVscElkLCAkWzQzXSA9IHQsICRbNDRdID0gdDIwKSA6IHQyMCA9ICRbNDRdO1xuICBsZXQgdDIxO1xuICAkWzQ1XSAhPT0gdCA/ICh0MjEgPSB0KFwic3RydWN0dXJlLWVycm9yLnJlbG9hZC1idXR0b24udGV4dFwiKSwgJFs0NV0gPSB0LCAkWzQ2XSA9IHQyMSkgOiB0MjEgPSAkWzQ2XTtcbiAgbGV0IHQyMjtcbiAgJFs0N10gIT09IGhhbmRsZVJlbG9hZCB8fCAkWzQ4XSAhPT0gdDIxID8gKHQyMiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQm94LCB7IG1hcmdpblRvcDogNCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goQnV0dG9uLCB7IHRleHQ6IHQyMSwgaWNvbjogU3luY0ljb24sIHRvbmU6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiBoYW5kbGVSZWxvYWQgfSkgfSksICRbNDddID0gaGFuZGxlUmVsb2FkLCAkWzQ4XSA9IHQyMSwgJFs0OV0gPSB0MjIpIDogdDIyID0gJFs0OV07XG4gIGxldCB0MjM7XG4gICRbNTBdICE9PSBUMCB8fCAkWzUxXSAhPT0gdDE5IHx8ICRbNTJdICE9PSB0MiB8fCAkWzUzXSAhPT0gdDIwIHx8ICRbNTRdICE9PSB0MjIgfHwgJFs1NV0gIT09IHQzIHx8ICRbNTZdICE9PSB0NCB8fCAkWzU3XSAhPT0gdDUgfHwgJFs1OF0gIT09IHQ2IHx8ICRbNTldICE9PSB0NyB8fCAkWzYwXSAhPT0gdDggPyAodDIzID0gLyogQF9fUFVSRV9fICovIGpzeHMoVDAsIHsgbWFyZ2luVG9wOiB0MiwgcGFkZGluZzogdDMsIHJhZGl1czogdDQsIG92ZXJmbG93OiB0NSwgc2hhZG93OiB0NiwgdG9uZTogdDcsIGNoaWxkcmVuOiBbXG4gICAgdDgsXG4gICAgdDE5LFxuICAgIHQyMCxcbiAgICB0MjJcbiAgXSB9KSwgJFs1MF0gPSBUMCwgJFs1MV0gPSB0MTksICRbNTJdID0gdDIsICRbNTNdID0gdDIwLCAkWzU0XSA9IHQyMiwgJFs1NV0gPSB0MywgJFs1Nl0gPSB0NCwgJFs1N10gPSB0NSwgJFs1OF0gPSB0NiwgJFs1OV0gPSB0NywgJFs2MF0gPSB0OCwgJFs2MV0gPSB0MjMpIDogdDIzID0gJFs2MV07XG4gIGxldCB0MjQ7XG4gICRbNjJdICE9PSBUMSB8fCAkWzYzXSAhPT0gdDIzIHx8ICRbNjRdICE9PSB0OSA/ICh0MjQgPSAvKiBAX19QVVJFX18gKi8ganN4cyhUMSwgeyBjaGlsZHJlbjogW1xuICAgIHQ5LFxuICAgIHQyM1xuICBdIH0pLCAkWzYyXSA9IFQxLCAkWzYzXSA9IHQyMywgJFs2NF0gPSB0OSwgJFs2NV0gPSB0MjQpIDogdDI0ID0gJFs2NV07XG4gIGxldCB0MjU7XG4gIHJldHVybiAkWzY2XSAhPT0gVDIgfHwgJFs2N10gIT09IHQxMCB8fCAkWzY4XSAhPT0gdDExIHx8ICRbNjldICE9PSB0MTIgfHwgJFs3MF0gIT09IHQxMyB8fCAkWzcxXSAhPT0gdDE0IHx8ICRbNzJdICE9PSB0MjQgPyAodDI1ID0gLyogQF9fUFVSRV9fICovIGpzeChUMiwgeyBoZWlnaHQ6IHQxMCwgb3ZlcmZsb3c6IHQxMSwgcGFkZGluZzogdDEyLCBzaXppbmc6IHQxMywgdG9uZTogdDE0LCBjaGlsZHJlbjogdDI0IH0pLCAkWzY2XSA9IFQyLCAkWzY3XSA9IHQxMCwgJFs2OF0gPSB0MTEsICRbNjldID0gdDEyLCAkWzcwXSA9IHQxMywgJFs3MV0gPSB0MTQsICRbNzJdID0gdDI0LCAkWzczXSA9IHQyNSkgOiB0MjUgPSAkWzczXSwgdDI1O1xufVxuZnVuY3Rpb24gX3RlbXAyJDIoc2VnbWVudCwgaSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChQYXRoU2VnbWVudCwgeyBjaGlsZHJlbjogc2VnbWVudCB9LCBgJHtzZWdtZW50fS0ke2l9YCk7XG59XG5mdW5jdGlvbiBfdGVtcCQzKCkge1xuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59XG5mdW5jdGlvbiBOb0RvY3VtZW50VHlwZXNTY3JlZW4oKSB7XG4gIGNvbnN0ICQgPSBjKDE3KSwge1xuICAgIHRcbiAgfSA9IHVzZVRyYW5zbGF0aW9uKHN0cnVjdHVyZUxvY2FsZU5hbWVzcGFjZSk7XG4gIGxldCB0MDtcbiAgJFswXSA9PT0gLyogQF9fUFVSRV9fICovIFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQwID0gLyogQF9fUFVSRV9fICovIGpzeChCb3gsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goVGV4dCwgeyBzaXplOiAxLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChXYXJuaW5nT3V0bGluZUljb24sIHt9KSB9KSB9KSwgJFswXSA9IHQwKSA6IHQwID0gJFswXTtcbiAgbGV0IHQxO1xuICAkWzFdICE9PSB0ID8gKHQxID0gdChcIm5vLWRvY3VtZW50LXR5cGVzLXNjcmVlbi50aXRsZVwiKSwgJFsxXSA9IHQsICRbMl0gPSB0MSkgOiB0MSA9ICRbMl07XG4gIGxldCB0MjtcbiAgJFszXSAhPT0gdDEgPyAodDIgPSAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgYXM6IFwiaDFcIiwgc2l6ZTogMSwgd2VpZ2h0OiBcIm1lZGl1bVwiLCBjaGlsZHJlbjogdDEgfSksICRbM10gPSB0MSwgJFs0XSA9IHQyKSA6IHQyID0gJFs0XTtcbiAgbGV0IHQzO1xuICAkWzVdICE9PSB0ID8gKHQzID0gdChcIm5vLWRvY3VtZW50LXR5cGVzLXNjcmVlbi5zdWJ0aXRsZVwiKSwgJFs1XSA9IHQsICRbNl0gPSB0MykgOiB0MyA9ICRbNl07XG4gIGxldCB0NDtcbiAgJFs3XSAhPT0gdDMgPyAodDQgPSAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgYXM6IFwicFwiLCBtdXRlZDogITAsIHNpemU6IDEsIGNoaWxkcmVuOiB0MyB9KSwgJFs3XSA9IHQzLCAkWzhdID0gdDQpIDogdDQgPSAkWzhdO1xuICBsZXQgdDU7XG4gICRbOV0gIT09IHQgPyAodDUgPSB0KFwibm8tZG9jdW1lbnQtdHlwZXMtc2NyZWVuLmxpbmstdGV4dFwiKSwgJFs5XSA9IHQsICRbMTBdID0gdDUpIDogdDUgPSAkWzEwXTtcbiAgbGV0IHQ2O1xuICAkWzExXSAhPT0gdDUgPyAodDYgPSAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgYXM6IFwicFwiLCBtdXRlZDogITAsIHNpemU6IDEsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiYVwiLCB7IGhyZWY6IFwiaHR0cHM6Ly93d3cuc2FuaXR5LmlvL2RvY3MvY3JlYXRlLWEtc2NoZW1hLWFuZC1jb25maWd1cmUtc2FuaXR5LXN0dWRpb1wiLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIHJlbDogXCJub3JlZmVycmVyXCIsIGNoaWxkcmVuOiB0NSB9KSB9KSwgJFsxMV0gPSB0NSwgJFsxMl0gPSB0NikgOiB0NiA9ICRbMTJdO1xuICBsZXQgdDc7XG4gIHJldHVybiAkWzEzXSAhPT0gdDIgfHwgJFsxNF0gIT09IHQ0IHx8ICRbMTVdICE9PSB0NiA/ICh0NyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQ2FyZCwgeyBoZWlnaHQ6IFwiZmlsbFwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChGbGV4LCB7IGFsaWduOiBcImNlbnRlclwiLCBoZWlnaHQ6IFwiZmlsbFwiLCBqdXN0aWZ5OiBcImNlbnRlclwiLCBwYWRkaW5nOiA0LCBzaXppbmc6IFwiYm9yZGVyXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KENvbnRhaW5lciwgeyB3aWR0aDogMCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goQ2FyZCwgeyBwYWRkaW5nOiA0LCByYWRpdXM6IDIsIHNoYWRvdzogMSwgdG9uZTogXCJjYXV0aW9uXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhGbGV4LCB7IGNoaWxkcmVuOiBbXG4gICAgdDAsXG4gICAgLyogQF9fUFVSRV9fICovIGpzeHMoU3RhY2ssIHsgZmxleDogMSwgbWFyZ2luTGVmdDogMywgc3BhY2U6IDMsIGNoaWxkcmVuOiBbXG4gICAgICB0MixcbiAgICAgIHQ0LFxuICAgICAgdDZcbiAgICBdIH0pXG4gIF0gfSkgfSkgfSkgfSkgfSksICRbMTNdID0gdDIsICRbMTRdID0gdDQsICRbMTVdID0gdDYsICRbMTZdID0gdDcpIDogdDcgPSAkWzE2XSwgdDc7XG59XG5jb25zdCBEb2N1bWVudFRpdGxlID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDcpLCB7XG4gICAgZG9jdW1lbnRJZCxcbiAgICBkb2N1bWVudFR5cGVcbiAgfSA9IHByb3BzLCB7XG4gICAgc2VsZWN0ZWRSZWxlYXNlSWRcbiAgfSA9IHVzZVBlcnNwZWN0aXZlKCksIGVkaXRTdGF0ZSA9IHVzZUVkaXRTdGF0ZShkb2N1bWVudElkLCBkb2N1bWVudFR5cGUsIFwiZGVmYXVsdFwiLCBzZWxlY3RlZFJlbGVhc2VJZCksIHNjaGVtYSA9IHVzZVNjaGVtYSgpLCB7XG4gICAgdFxuICB9ID0gdXNlVHJhbnNsYXRpb24oc3RydWN0dXJlTG9jYWxlTmFtZXNwYWNlKSwgaXNOZXdEb2N1bWVudCA9ICFlZGl0U3RhdGU/LnB1Ymxpc2hlZCAmJiAhZWRpdFN0YXRlPy5kcmFmdCwgZG9jdW1lbnRWYWx1ZSA9IGVkaXRTdGF0ZT8udmVyc2lvbiB8fCBlZGl0U3RhdGU/LmRyYWZ0IHx8IGVkaXRTdGF0ZT8ucHVibGlzaGVkLCBzY2hlbWFUeXBlID0gc2NoZW1hLmdldChkb2N1bWVudFR5cGUpLCB7XG4gICAgdmFsdWUsXG4gICAgaXNMb2FkaW5nOiBwcmV2aWV3VmFsdWVJc0xvYWRpbmdcbiAgfSA9IHVuc3RhYmxlX3VzZVZhbHVlUHJldmlldyh7XG4gICAgZW5hYmxlZDogISFkb2N1bWVudFZhbHVlLFxuICAgIHNjaGVtYVR5cGUsXG4gICAgdmFsdWU6IGRvY3VtZW50VmFsdWVcbiAgfSksIHtcbiAgICBsYXN0UmV2aXNpb25Eb2N1bWVudFxuICB9ID0gdXNlRG9jdW1lbnRMYXN0UmV2KGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSksIGRvY3VtZW50VGl0bGUgPSBsYXN0UmV2aXNpb25Eb2N1bWVudCAmJiAhZG9jdW1lbnRWYWx1ZSA/IFwiXCIgOiBpc05ld0RvY3VtZW50ID8gdChcImJyb3dzZXItZG9jdW1lbnQtdGl0bGUubmV3LWRvY3VtZW50XCIsIHtcbiAgICBzY2hlbWFUeXBlOiBzY2hlbWFUeXBlPy50aXRsZSB8fCBzY2hlbWFUeXBlPy5uYW1lXG4gIH0pIDogdmFsdWU/LnRpdGxlIHx8IHQoXCJicm93c2VyLWRvY3VtZW50LXRpdGxlLnVudGl0bGVkLWRvY3VtZW50XCIpLCBzZXR0bGVkID0gZWRpdFN0YXRlLnJlYWR5ICYmICFwcmV2aWV3VmFsdWVJc0xvYWRpbmcsIG5ld1RpdGxlID0gdXNlQ29uc3RydWN0RG9jdW1lbnRUaXRsZShkb2N1bWVudFRpdGxlKTtcbiAgbGV0IHQwO1xuICAkWzBdICE9PSBuZXdUaXRsZSB8fCAkWzFdICE9PSBzZXR0bGVkID8gKHQwID0gKCkgPT4ge1xuICAgIHNldHRsZWQgJiYgKGRvY3VtZW50LnRpdGxlID0gbmV3VGl0bGUpO1xuICB9LCAkWzBdID0gbmV3VGl0bGUsICRbMV0gPSBzZXR0bGVkLCAkWzJdID0gdDApIDogdDAgPSAkWzJdO1xuICBsZXQgdDE7XG4gIHJldHVybiAkWzNdICE9PSBkb2N1bWVudFRpdGxlIHx8ICRbNF0gIT09IG5ld1RpdGxlIHx8ICRbNV0gIT09IHNldHRsZWQgPyAodDEgPSBbZG9jdW1lbnRUaXRsZSwgc2V0dGxlZCwgbmV3VGl0bGVdLCAkWzNdID0gZG9jdW1lbnRUaXRsZSwgJFs0XSA9IG5ld1RpdGxlLCAkWzVdID0gc2V0dGxlZCwgJFs2XSA9IHQxKSA6IHQxID0gJFs2XSwgdXNlRWZmZWN0KHQwLCB0MSksIG51bGw7XG59LCBQYXNzdGhyb3VnaFRpdGxlID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDUpLCB7XG4gICAgdGl0bGVcbiAgfSA9IHByb3BzLCBuZXdUaXRsZSA9IHVzZUNvbnN0cnVjdERvY3VtZW50VGl0bGUodGl0bGUpO1xuICBsZXQgdDA7XG4gICRbMF0gIT09IG5ld1RpdGxlID8gKHQwID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LnRpdGxlID0gbmV3VGl0bGU7XG4gIH0sICRbMF0gPSBuZXdUaXRsZSwgJFsxXSA9IHQwKSA6IHQwID0gJFsxXTtcbiAgbGV0IHQxO1xuICByZXR1cm4gJFsyXSAhPT0gbmV3VGl0bGUgfHwgJFszXSAhPT0gdGl0bGUgPyAodDEgPSBbbmV3VGl0bGUsIHRpdGxlXSwgJFsyXSA9IG5ld1RpdGxlLCAkWzNdID0gdGl0bGUsICRbNF0gPSB0MSkgOiB0MSA9ICRbNF0sIHVzZUVmZmVjdCh0MCwgdDEpLCBudWxsO1xufSwgU3RydWN0dXJlVGl0bGUgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgJCA9IGMoOCksIHtcbiAgICByZXNvbHZlZFBhbmVzXG4gIH0gPSBwcm9wcztcbiAgaWYgKCFyZXNvbHZlZFBhbmVzPy5sZW5ndGgpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGxhc3RQYW5lID0gcmVzb2x2ZWRQYW5lc1tyZXNvbHZlZFBhbmVzLmxlbmd0aCAtIDFdO1xuICBpZiAoaXNMb2FkaW5nUGFuZShsYXN0UGFuZSkpIHtcbiAgICBsZXQgdDAyO1xuICAgIHJldHVybiAkWzBdID09PSAvKiBAX19QVVJFX18gKi8gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDAyID0gLyogQF9fUFVSRV9fICovIGpzeChQYXNzdGhyb3VnaFRpdGxlLCB7fSksICRbMF0gPSB0MDIpIDogdDAyID0gJFswXSwgdDAyO1xuICB9XG4gIGlmIChpc0RvY3VtZW50UGFuZShsYXN0UGFuZSkpIHtcbiAgICBpZiAobGFzdFBhbmU/LnRpdGxlKSB7XG4gICAgICBsZXQgdDAzO1xuICAgICAgcmV0dXJuICRbMV0gIT09IGxhc3RQYW5lLnRpdGxlID8gKHQwMyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUGFzc3Rocm91Z2hUaXRsZSwgeyB0aXRsZTogbGFzdFBhbmUudGl0bGUgfSksICRbMV0gPSBsYXN0UGFuZS50aXRsZSwgJFsyXSA9IHQwMykgOiB0MDMgPSAkWzJdLCB0MDM7XG4gICAgfVxuICAgIGxldCB0MDI7XG4gICAgcmV0dXJuICRbM10gIT09IGxhc3RQYW5lLm9wdGlvbnMuaWQgfHwgJFs0XSAhPT0gbGFzdFBhbmUub3B0aW9ucy50eXBlID8gKHQwMiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goRG9jdW1lbnRUaXRsZSwgeyBkb2N1bWVudElkOiBsYXN0UGFuZS5vcHRpb25zLmlkLCBkb2N1bWVudFR5cGU6IGxhc3RQYW5lLm9wdGlvbnMudHlwZSB9KSwgJFszXSA9IGxhc3RQYW5lLm9wdGlvbnMuaWQsICRbNF0gPSBsYXN0UGFuZS5vcHRpb25zLnR5cGUsICRbNV0gPSB0MDIpIDogdDAyID0gJFs1XSwgdDAyO1xuICB9XG4gIGNvbnN0IHQwID0gbGFzdFBhbmU/LnRpdGxlO1xuICBsZXQgdDE7XG4gIHJldHVybiAkWzZdICE9PSB0MCA/ICh0MSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUGFzc3Rocm91Z2hUaXRsZSwgeyB0aXRsZTogdDAgfSksICRbNl0gPSB0MCwgJFs3XSA9IHQxKSA6IHQxID0gJFs3XSwgdDE7XG59O1xuZnVuY3Rpb24gdXNlQ29uc3RydWN0RG9jdW1lbnRUaXRsZShhY3RpdmVUaXRsZSkge1xuICBjb25zdCAkID0gYygzKSwgc3RydWN0dXJlVG9vbEJhc2VUaXRsZSA9IHVzZVN0cnVjdHVyZVRvb2woKS5zdHJ1Y3R1cmVDb250ZXh0LnRpdGxlO1xuICBsZXQgdDA7XG4gIHJldHVybiAkWzBdICE9PSBhY3RpdmVUaXRsZSB8fCAkWzFdICE9PSBzdHJ1Y3R1cmVUb29sQmFzZVRpdGxlID8gKHQwID0gW2FjdGl2ZVRpdGxlLCBzdHJ1Y3R1cmVUb29sQmFzZVRpdGxlXS5maWx0ZXIoX3RlbXAkMiksICRbMF0gPSBhY3RpdmVUaXRsZSwgJFsxXSA9IHN0cnVjdHVyZVRvb2xCYXNlVGl0bGUsICRbMl0gPSB0MCkgOiB0MCA9ICRbMl0sIHQwLmpvaW4oXCIgfCBcIik7XG59XG5mdW5jdGlvbiBfdGVtcCQyKHRpdGxlKSB7XG4gIHJldHVybiB0aXRsZTtcbn1cbmZ1bmN0aW9uIGlzRG9jdW1lbnRQYW5lKHBhbmUpIHtcbiAgcmV0dXJuIHBhbmUgIT09IExPQURJTkdfUEFORSAmJiBwYW5lLnR5cGUgPT09IFwiZG9jdW1lbnRcIjtcbn1cbmZ1bmN0aW9uIGlzTG9hZGluZ1BhbmUocGFuZSkge1xuICByZXR1cm4gcGFuZSA9PT0gTE9BRElOR19QQU5FO1xufVxuY29uc3QgU3R5bGVkUGFuZUxheW91dCA9IHN0eWxlZChQYW5lTGF5b3V0KWBcbiAgbWluLWhlaWdodDogMTAwJTtcbiAgbWluLXdpZHRoOiAzMjBweDtcbmAsIGlzU2F2ZUhvdGtleSA9IGlzSG90a2V5KFwibW9kK3NcIiksIFN0cnVjdHVyZVRvb2wgPSBtZW1vKGZ1bmN0aW9uKHQwKSB7XG4gIGNvbnN0ICQgPSBjKDU4KSwge1xuICAgIG9uUGFuZUNoYW5nZVxuICB9ID0gdDAsIHtcbiAgICBwdXNoOiBwdXNoVG9hc3RcbiAgfSA9IHVzZVRvYXN0KCksIHNjaGVtYSA9IHVzZVNjaGVtYSgpLCB7XG4gICAgbmF2aWdhdGVcbiAgfSA9IHVzZVJvdXRlcigpLCByb3V0ZXJTdGF0ZSA9IHVzZVJvdXRlclN0YXRlKCksIHtcbiAgICBsYXlvdXRDb2xsYXBzZWQsXG4gICAgc2V0TGF5b3V0Q29sbGFwc2VkXG4gIH0gPSB1c2VTdHJ1Y3R1cmVUb29sKCksIHJlc29sdmVkUGFuZXNWYWx1ZSA9IHVzZVJlc29sdmVkUGFuZXMoKSwge1xuICAgIHBhbmVEYXRhSXRlbXMsXG4gICAgcmVzb2x2ZWRQYW5lcyxcbiAgICBzZXRNYXhpbWl6ZWRQYW5lLFxuICAgIG1heGltaXplZFBhbmVcbiAgfSA9IHJlc29sdmVkUGFuZXNWYWx1ZSwgaXNSZXNvbHZpbmdJbnRlbnQgPSB1c2VSb3V0ZXJTdGF0ZShfdGVtcCQxKSwge1xuICAgIHNhbml0eTogdDFcbiAgfSA9IHVzZVRoZW1lKCksIHtcbiAgICBtZWRpYVxuICB9ID0gdDEsIFtwb3J0YWxFbGVtZW50LCBzZXRQb3J0YWxFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBsZXQgdDI7XG4gICRbMF0gIT09IHNldExheW91dENvbGxhcHNlZCA/ICh0MiA9ICgpID0+IHNldExheW91dENvbGxhcHNlZCghMCksICRbMF0gPSBzZXRMYXlvdXRDb2xsYXBzZWQsICRbMV0gPSB0MikgOiB0MiA9ICRbMV07XG4gIGNvbnN0IGhhbmRsZVJvb3RDb2xsYXBzZSA9IHQyO1xuICBsZXQgdDM7XG4gICRbMl0gIT09IHNldExheW91dENvbGxhcHNlZCA/ICh0MyA9ICgpID0+IHNldExheW91dENvbGxhcHNlZCghMSksICRbMl0gPSBzZXRMYXlvdXRDb2xsYXBzZWQsICRbM10gPSB0MykgOiB0MyA9ICRbM107XG4gIGNvbnN0IGhhbmRsZVJvb3RFeHBhbmQgPSB0MztcbiAgbGV0IHQ0O1xuICBpZiAoJFs0XSAhPT0gcGFuZURhdGFJdGVtcykge1xuICAgIGNvbnN0IG1heGltaXplZExhc3RJbmRleCA9IHBhbmVEYXRhSXRlbXMuZmluZExhc3RJbmRleChfdGVtcDIkMSk7XG4gICAgdDQgPSBtYXhpbWl6ZWRMYXN0SW5kZXggPT09IC0xID8gcGFuZURhdGFJdGVtcyA6IHBhbmVEYXRhSXRlbXMuc2xpY2UobWF4aW1pemVkTGFzdEluZGV4KS5maWx0ZXIoKHBhbmVfMCkgPT4gcGFuZV8wLmdyb3VwSW5kZXggPD0gcGFuZURhdGFJdGVtc1ttYXhpbWl6ZWRMYXN0SW5kZXhdLmdyb3VwSW5kZXgpLCAkWzRdID0gcGFuZURhdGFJdGVtcywgJFs1XSA9IHQ0O1xuICB9IGVsc2VcbiAgICB0NCA9ICRbNV07XG4gIGNvbnN0IHBhbmVJdGVtc1RvU2hvdyA9IHQ0O1xuICBsZXQgdDUsIHQ2O1xuICAkWzZdICE9PSBvblBhbmVDaGFuZ2UgfHwgJFs3XSAhPT0gcmVzb2x2ZWRQYW5lcyA/ICh0NSA9ICgpID0+IHtcbiAgICByZXNvbHZlZFBhbmVzLmxlbmd0aCAmJiBvblBhbmVDaGFuZ2UocmVzb2x2ZWRQYW5lcyk7XG4gIH0sIHQ2ID0gW29uUGFuZUNoYW5nZSwgcmVzb2x2ZWRQYW5lc10sICRbNl0gPSBvblBhbmVDaGFuZ2UsICRbN10gPSByZXNvbHZlZFBhbmVzLCAkWzhdID0gdDUsICRbOV0gPSB0NikgOiAodDUgPSAkWzhdLCB0NiA9ICRbOV0pLCB1c2VFZmZlY3QodDUsIHQ2KTtcbiAgbGV0IHQ3LCB0ODtcbiAgJFsxMF0gIT09IHB1c2hUb2FzdCA/ICh0NyA9ICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVHbG9iYWxLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICBpc1NhdmVIb3RrZXkoZXZlbnQpICYmIChldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBwdXNoVG9hc3Qoe1xuICAgICAgICBjbG9zYWJsZTogITAsXG4gICAgICAgIGlkOiBcImF1dG8tc2F2ZS1tZXNzYWdlXCIsXG4gICAgICAgIHN0YXR1czogXCJpbmZvXCIsXG4gICAgICAgIHRpdGxlOiBcIllvdXIgd29yayBpcyBhdXRvbWF0aWNhbGx5IHNhdmVkIVwiLFxuICAgICAgICBkdXJhdGlvbjogNGUzXG4gICAgICB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUdsb2JhbEtleURvd24pLCAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlR2xvYmFsS2V5RG93bik7XG4gIH0sIHQ4ID0gW3B1c2hUb2FzdF0sICRbMTBdID0gcHVzaFRvYXN0LCAkWzExXSA9IHQ3LCAkWzEyXSA9IHQ4KSA6ICh0NyA9ICRbMTFdLCB0OCA9ICRbMTJdKSwgdXNlRWZmZWN0KHQ3LCB0OCk7XG4gIGNvbnN0IGhhc0RlZmluZWREb2N1bWVudFR5cGVzID0gc2NoZW1hLl9vcmlnaW5hbD8udHlwZXMuc29tZShfaXNDdXN0b21Eb2N1bWVudFR5cGVEZWZpbml0aW9uKTtcbiAgbGV0IHQ5O1xuICAkWzEzXSAhPT0gbmF2aWdhdGUgfHwgJFsxNF0gIT09IHJvdXRlclN0YXRlPy5wYW5lcyB8fCAkWzE1XSAhPT0gc2V0TWF4aW1pemVkUGFuZSA/ICh0OSA9IChwYW5lRGF0YSkgPT4ge1xuICAgIGlmICghcGFuZURhdGEpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgY3VycmVudFBhbmVzID0gcm91dGVyU3RhdGU/LnBhbmVzIHx8IFtdO1xuICAgIGlmIChwYW5lRGF0YS5tYXhpbWl6ZWQpIHtcbiAgICAgIHNldE1heGltaXplZFBhbmUobnVsbCksIG5hdmlnYXRlKHtcbiAgICAgICAgcGFuZXM6IGN1cnJlbnRQYW5lc1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwYW5lRGF0YS5wYW5lICE9PSBMT0FESU5HX1BBTkUgJiYgcGFuZURhdGEucGFuZS50eXBlID09PSBcImRvY3VtZW50XCIpIHtcbiAgICAgIGNvbnN0IHNsaWNlZFBhbmVzID0gY3VycmVudFBhbmVzLnNsaWNlKDAsIHBhbmVEYXRhLmdyb3VwSW5kZXgpO1xuICAgICAgc2V0TWF4aW1pemVkUGFuZShwYW5lRGF0YSksIG5hdmlnYXRlKHtcbiAgICAgICAgcGFuZXM6IHNsaWNlZFBhbmVzXG4gICAgICB9KTtcbiAgICB9XG4gIH0sICRbMTNdID0gbmF2aWdhdGUsICRbMTRdID0gcm91dGVyU3RhdGU/LnBhbmVzLCAkWzE1XSA9IHNldE1heGltaXplZFBhbmUsICRbMTZdID0gdDkpIDogdDkgPSAkWzE2XTtcbiAgY29uc3Qgb25TZXRNYXhpbWl6ZWRQYW5lID0gdDksIHByZXZpb3VzU2VsZWN0ZWRJbmRleFJlZiA9IHVzZVJlZigtMSk7XG4gIGxldCB0MTA7XG4gICRbMTddICE9PSBuYXZpZ2F0ZSB8fCAkWzE4XSAhPT0gcGFuZURhdGFJdGVtcyB8fCAkWzE5XSAhPT0gcm91dGVyU3RhdGU/LnBhbmVzIHx8ICRbMjBdICE9PSBzZXRNYXhpbWl6ZWRQYW5lID8gKHQxMCA9ICgpID0+IHtcbiAgICBjb25zdCBmb2N1c2VkUGFuZUFjY29yZGluZ1RvUGFyYW1zID0gcGFuZURhdGFJdGVtcy5maW5kKF90ZW1wMyk7XG4gICAgaWYgKCFmb2N1c2VkUGFuZUFjY29yZGluZ1RvUGFyYW1zKVxuICAgICAgcmV0dXJuO1xuICAgIGZvY3VzZWRQYW5lQWNjb3JkaW5nVG9QYXJhbXMucGFuZSAhPT0gTE9BRElOR19QQU5FICYmIGZvY3VzZWRQYW5lQWNjb3JkaW5nVG9QYXJhbXMucGFuZS50eXBlID09PSBcImRvY3VtZW50XCIgJiYgc2V0TWF4aW1pemVkUGFuZShmb2N1c2VkUGFuZUFjY29yZGluZ1RvUGFyYW1zKTtcbiAgICBjb25zdCBwYW5lc1dpdGhvdXRGb2N1cyA9IChyb3V0ZXJTdGF0ZT8ucGFuZXMgfHwgW10pLm1hcChfdGVtcDUpO1xuICAgIG5hdmlnYXRlKHtcbiAgICAgIHBhbmVzOiBwYW5lc1dpdGhvdXRGb2N1c1xuICAgIH0sIHtcbiAgICAgIHJlcGxhY2U6ICEwXG4gICAgfSk7XG4gIH0sICRbMTddID0gbmF2aWdhdGUsICRbMThdID0gcGFuZURhdGFJdGVtcywgJFsxOV0gPSByb3V0ZXJTdGF0ZT8ucGFuZXMsICRbMjBdID0gc2V0TWF4aW1pemVkUGFuZSwgJFsyMV0gPSB0MTApIDogdDEwID0gJFsyMV07XG4gIGNvbnN0IHQxMSA9IHJvdXRlclN0YXRlPy5wYW5lcztcbiAgbGV0IHQxMjtcbiAgJFsyMl0gIT09IG5hdmlnYXRlIHx8ICRbMjNdICE9PSBwYW5lRGF0YUl0ZW1zIHx8ICRbMjRdICE9PSBzZXRNYXhpbWl6ZWRQYW5lIHx8ICRbMjVdICE9PSB0MTEgPyAodDEyID0gW25hdmlnYXRlLCBwYW5lRGF0YUl0ZW1zLCB0MTEsIHNldE1heGltaXplZFBhbmVdLCAkWzIyXSA9IG5hdmlnYXRlLCAkWzIzXSA9IHBhbmVEYXRhSXRlbXMsICRbMjRdID0gc2V0TWF4aW1pemVkUGFuZSwgJFsyNV0gPSB0MTEsICRbMjZdID0gdDEyKSA6IHQxMiA9ICRbMjZdLCB1c2VFZmZlY3QodDEwLCB0MTIpO1xuICBsZXQgdDEzLCB0MTQ7XG4gIGlmICgkWzI3XSAhPT0gbWF4aW1pemVkUGFuZSB8fCAkWzI4XSAhPT0gcGFuZURhdGFJdGVtcyB8fCAkWzI5XSAhPT0gc2V0TWF4aW1pemVkUGFuZSA/ICh0MTMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IHBhbmVEYXRhSXRlbXMuZmluZEluZGV4KF90ZW1wNiksIHByZXZTZWxlY3RlZEluZGV4ID0gcHJldmlvdXNTZWxlY3RlZEluZGV4UmVmLmN1cnJlbnQ7XG4gICAgaWYgKHByZXZpb3VzU2VsZWN0ZWRJbmRleFJlZi5jdXJyZW50ID0gc2VsZWN0ZWRJbmRleCwgISFtYXhpbWl6ZWRQYW5lKSB7XG4gICAgICBpZiAobWF4aW1pemVkUGFuZS5wYW5lICE9PSBMT0FESU5HX1BBTkUgJiYgbWF4aW1pemVkUGFuZS5wYW5lLnR5cGUgIT09IFwiZG9jdW1lbnRcIikge1xuICAgICAgICBzZXRNYXhpbWl6ZWRQYW5lKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc2VsZWN0ZWRJbmRleCAhPT0gLTEgJiYgc2VsZWN0ZWRJbmRleCAhPT0gcHJldlNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRQYW5lID0gcGFuZURhdGFJdGVtc1tzZWxlY3RlZEluZGV4XTtcbiAgICAgICAgc2V0TWF4aW1pemVkUGFuZShzZWxlY3RlZFBhbmUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXBhbmVEYXRhSXRlbXMuc29tZSgocGFuZV8zKSA9PiBwYW5lXzMua2V5ID09PSBtYXhpbWl6ZWRQYW5lLmtleSkpIHtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tQYW5lID0gcGFuZURhdGFJdGVtcy5maW5kKChwYW5lXzQpID0+IHBhbmVfNC5ncm91cEluZGV4ID09PSBtYXhpbWl6ZWRQYW5lLmdyb3VwSW5kZXggJiYgcGFuZV80LnNpYmxpbmdJbmRleCA9PT0gbWF4aW1pemVkUGFuZS5zaWJsaW5nSW5kZXggJiYgcGFuZV80LnBhbmUgIT09IExPQURJTkdfUEFORSAmJiBwYW5lXzQucGFuZS50eXBlID09PSBcImRvY3VtZW50XCIpO1xuICAgICAgICBzZXRNYXhpbWl6ZWRQYW5lKGZhbGxiYWNrUGFuZSB8fCBudWxsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHQxNCA9IFttYXhpbWl6ZWRQYW5lLCBwYW5lRGF0YUl0ZW1zLCBzZXRNYXhpbWl6ZWRQYW5lXSwgJFsyN10gPSBtYXhpbWl6ZWRQYW5lLCAkWzI4XSA9IHBhbmVEYXRhSXRlbXMsICRbMjldID0gc2V0TWF4aW1pemVkUGFuZSwgJFszMF0gPSB0MTMsICRbMzFdID0gdDE0KSA6ICh0MTMgPSAkWzMwXSwgdDE0ID0gJFszMV0pLCB1c2VFZmZlY3QodDEzLCB0MTQpLCAhaGFzRGVmaW5lZERvY3VtZW50VHlwZXMpIHtcbiAgICBsZXQgdDE1MjtcbiAgICByZXR1cm4gJFszMl0gPT09IC8qIEBfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MTUyID0gLyogQF9fUFVSRV9fICovIGpzeChOb0RvY3VtZW50VHlwZXNTY3JlZW4sIHt9KSwgJFszMl0gPSB0MTUyKSA6IHQxNTIgPSAkWzMyXSwgdDE1MjtcbiAgfVxuICBjb25zdCB0MTUgPSBwb3J0YWxFbGVtZW50IHx8IG51bGwsIHQxNiA9IGxheW91dENvbGxhcHNlZCA/IHZvaWQgMCA6IFwiZmlsbFwiLCB0MTcgPSBtZWRpYVsxXTtcbiAgbGV0IHQxODtcbiAgaWYgKCRbMzNdICE9PSBvblNldE1heGltaXplZFBhbmUgfHwgJFszNF0gIT09IHBhbmVJdGVtc1RvU2hvdykge1xuICAgIGxldCB0MTkyO1xuICAgICRbMzZdICE9PSBvblNldE1heGltaXplZFBhbmUgPyAodDE5MiA9IChwYW5lRGF0YV8wKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGFjdGl2ZSxcbiAgICAgICAgY2hpbGRJdGVtSWQsXG4gICAgICAgIGdyb3VwSW5kZXgsXG4gICAgICAgIGl0ZW1JZCxcbiAgICAgICAga2V5OiBwYW5lS2V5LFxuICAgICAgICBwYW5lOiBwYW5lXzUsXG4gICAgICAgIGluZGV4OiBwYW5lSW5kZXgsXG4gICAgICAgIHBhcmFtczogcGFuZVBhcmFtcyxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgc2libGluZ0luZGV4LFxuICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgbWF4aW1pemVkXG4gICAgICB9ID0gcGFuZURhdGFfMDtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBwYW5lXzUgPT09IExPQURJTkdfUEFORSA/IC8qIEBfX1BVUkVfXyAqLyBqc3goTG9hZGluZ1BhbmUsIHsgcGFuZUtleSwgcGF0aCwgc2VsZWN0ZWQgfSkgOiAvKiBAX19QVVJFX18gKi8ganN4KFN0cnVjdHVyZVRvb2xQYW5lLCB7IGFjdGl2ZSwgZ3JvdXBJbmRleCwgaW5kZXg6IHBhbmVJbmRleCwgcGFuZTogcGFuZV81LCBjaGlsZEl0ZW1JZCwgaXRlbUlkLCBwYW5lS2V5LCBwYXJhbXM6IHBhbmVQYXJhbXMsIHBheWxvYWQsIHBhdGgsIHNlbGVjdGVkLCBzaWJsaW5nSW5kZXgsIG1heGltaXplZCwgb25TZXRNYXhpbWl6ZWRQYW5lOiAoKSA9PiBvblNldE1heGltaXplZFBhbmUocGFuZURhdGFfMCkgfSkgfSwgYCR7cGFuZV81ID09PSBMT0FESU5HX1BBTkUgPyBcImxvYWRpbmdcIiA6IHBhbmVfNS50eXBlfS0ke3BhbmVJbmRleH1gKTtcbiAgICB9LCAkWzM2XSA9IG9uU2V0TWF4aW1pemVkUGFuZSwgJFszN10gPSB0MTkyKSA6IHQxOTIgPSAkWzM3XSwgdDE4ID0gcGFuZUl0ZW1zVG9TaG93Lm1hcCh0MTkyKSwgJFszM10gPSBvblNldE1heGltaXplZFBhbmUsICRbMzRdID0gcGFuZUl0ZW1zVG9TaG93LCAkWzM1XSA9IHQxODtcbiAgfSBlbHNlXG4gICAgdDE4ID0gJFszNV07XG4gIGxldCB0MTk7XG4gICRbMzhdICE9PSBpc1Jlc29sdmluZ0ludGVudCB8fCAkWzM5XSAhPT0gcGFuZURhdGFJdGVtcy5sZW5ndGggPyAodDE5ID0gcGFuZURhdGFJdGVtcy5sZW5ndGggPD0gMSAmJiBpc1Jlc29sdmluZ0ludGVudCAmJiAvKiBAX19QVVJFX18gKi8ganN4KExvYWRpbmdQYW5lLCB7IHBhbmVLZXk6IFwiaW50ZW50LXJlc29sdmVyXCIgfSksICRbMzhdID0gaXNSZXNvbHZpbmdJbnRlbnQsICRbMzldID0gcGFuZURhdGFJdGVtcy5sZW5ndGgsICRbNDBdID0gdDE5KSA6IHQxOSA9ICRbNDBdO1xuICBsZXQgdDIwO1xuICAkWzQxXSAhPT0gaGFuZGxlUm9vdENvbGxhcHNlIHx8ICRbNDJdICE9PSBoYW5kbGVSb290RXhwYW5kIHx8ICRbNDNdICE9PSBtZWRpYVsxXSB8fCAkWzQ0XSAhPT0gdDE2IHx8ICRbNDVdICE9PSB0MTggfHwgJFs0Nl0gIT09IHQxOSA/ICh0MjAgPSAvKiBAX19QVVJFX18gKi8ganN4cyhTdHlsZWRQYW5lTGF5b3V0LCB7IGZsZXg6IDEsIGhlaWdodDogdDE2LCBtaW5XaWR0aDogdDE3LCBvbkNvbGxhcHNlOiBoYW5kbGVSb290Q29sbGFwc2UsIG9uRXhwYW5kOiBoYW5kbGVSb290RXhwYW5kLCBjaGlsZHJlbjogW1xuICAgIHQxOCxcbiAgICB0MTlcbiAgXSB9KSwgJFs0MV0gPSBoYW5kbGVSb290Q29sbGFwc2UsICRbNDJdID0gaGFuZGxlUm9vdEV4cGFuZCwgJFs0M10gPSBtZWRpYVsxXSwgJFs0NF0gPSB0MTYsICRbNDVdID0gdDE4LCAkWzQ2XSA9IHQxOSwgJFs0N10gPSB0MjApIDogdDIwID0gJFs0N107XG4gIGxldCB0MjE7XG4gICRbNDhdICE9PSByZXNvbHZlZFBhbmVzID8gKHQyMSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU3RydWN0dXJlVGl0bGUsIHsgcmVzb2x2ZWRQYW5lcyB9KSwgJFs0OF0gPSByZXNvbHZlZFBhbmVzLCAkWzQ5XSA9IHQyMSkgOiB0MjEgPSAkWzQ5XTtcbiAgbGV0IHQyMjtcbiAgJFs1MF0gPT09IC8qIEBfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MjIgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgXCJkYXRhLXBvcnRhbFwiOiBcIlwiLCByZWY6IHNldFBvcnRhbEVsZW1lbnQgfSksICRbNTBdID0gdDIyKSA6IHQyMiA9ICRbNTBdO1xuICBsZXQgdDIzO1xuICAkWzUxXSAhPT0gdDE1IHx8ICRbNTJdICE9PSB0MjAgfHwgJFs1M10gIT09IHQyMSA/ICh0MjMgPSAvKiBAX19QVVJFX18gKi8ganN4cyhQb3J0YWxQcm92aWRlciwgeyBlbGVtZW50OiB0MTUsIGNoaWxkcmVuOiBbXG4gICAgdDIwLFxuICAgIHQyMSxcbiAgICB0MjJcbiAgXSB9KSwgJFs1MV0gPSB0MTUsICRbNTJdID0gdDIwLCAkWzUzXSA9IHQyMSwgJFs1NF0gPSB0MjMpIDogdDIzID0gJFs1NF07XG4gIGxldCB0MjQ7XG4gIHJldHVybiAkWzU1XSAhPT0gcmVzb2x2ZWRQYW5lc1ZhbHVlIHx8ICRbNTZdICE9PSB0MjMgPyAodDI0ID0gLyogQF9fUFVSRV9fICovIGpzeChSZXNvbHZlZFBhbmVzUHJvdmlkZXIsIHsgdmFsdWU6IHJlc29sdmVkUGFuZXNWYWx1ZSwgY2hpbGRyZW46IHQyMyB9KSwgJFs1NV0gPSByZXNvbHZlZFBhbmVzVmFsdWUsICRbNTZdID0gdDIzLCAkWzU3XSA9IHQyNCkgOiB0MjQgPSAkWzU3XSwgdDI0O1xufSk7XG5mdW5jdGlvbiBfdGVtcCQxKHN0YXRlKSB7XG4gIHJldHVybiB0eXBlb2Ygc3RhdGUuaW50ZW50ID09IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBfdGVtcDIkMShwYW5lKSB7XG4gIHJldHVybiBwYW5lLm1heGltaXplZDtcbn1cbmZ1bmN0aW9uIF90ZW1wMyhwKSB7XG4gIHJldHVybiBwLnBhcmFtcz8ubW9kZSA9PT0gXCJmb2N1c1wiO1xufVxuZnVuY3Rpb24gX3RlbXA0KHBhbmVfMSkge1xuICBjb25zdCB7XG4gICAgbW9kZTogX29taXRNb2RlLFxuICAgIC4uLnJlc3RcbiAgfSA9IHBhbmVfMS5wYXJhbXMgfHwge30sIG5leHRQYXJhbXMgPSBPYmplY3Qua2V5cyhyZXN0KS5sZW5ndGggPyByZXN0IDogdm9pZCAwO1xuICByZXR1cm4ge1xuICAgIC4uLnBhbmVfMSxcbiAgICBwYXJhbXM6IG5leHRQYXJhbXNcbiAgfTtcbn1cbmZ1bmN0aW9uIF90ZW1wNShncm91cCkge1xuICByZXR1cm4gZ3JvdXAubWFwKF90ZW1wNCk7XG59XG5mdW5jdGlvbiBfdGVtcDYocGFuZV8yKSB7XG4gIHJldHVybiBwYW5lXzIuc2VsZWN0ZWQ7XG59XG5mdW5jdGlvbiBTdHJ1Y3R1cmVUb29sQm91bmRhcnkodDApIHtcbiAgY29uc3QgJCA9IGMoMTQpLCB7XG4gICAgdG9vbDogdDFcbiAgfSA9IHQwLCB7XG4gICAgb3B0aW9uc1xuICB9ID0gdDEsIHtcbiAgICB1bnN0YWJsZV9zb3VyY2VzOiBzb3VyY2VzXG4gIH0gPSB1c2VXb3Jrc3BhY2UoKSwgW2ZpcnN0U291cmNlXSA9IHNvdXJjZXM7XG4gIGxldCB0MjtcbiAgJFswXSAhPT0gb3B0aW9ucyA/ICh0MiA9IG9wdGlvbnMgfHwge30sICRbMF0gPSBvcHRpb25zLCAkWzFdID0gdDIpIDogdDIgPSAkWzFdO1xuICBjb25zdCB7XG4gICAgc291cmNlLFxuICAgIGRlZmF1bHREb2N1bWVudE5vZGUsXG4gICAgc3RydWN0dXJlXG4gIH0gPSB0MjtcbiAgbGV0IHQzO1xuICAkWzJdID09PSAvKiBAX19QVVJFX18gKi8gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDMgPSBbXSwgJFsyXSA9IHQzKSA6IHQzID0gJFsyXSwgdXNlRWZmZWN0KF90ZW1wMiwgdDMpO1xuICBsZXQgdDQ7XG4gICRbM10gPT09IC8qIEBfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0NCA9IHtcbiAgICBlcnJvcjogbnVsbFxuICB9LCAkWzNdID0gdDQpIDogdDQgPSAkWzNdO1xuICBjb25zdCBbdDUsIHNldEVycm9yXSA9IHVzZVN0YXRlKHQ0KSwge1xuICAgIGVycm9yXG4gIH0gPSB0NTtcbiAgaWYgKGVycm9yKSB7XG4gICAgbGV0IHQ2MjtcbiAgICByZXR1cm4gJFs0XSAhPT0gZXJyb3IgPyAodDYyID0gLyogQF9fUFVSRV9fICovIGpzeChTdHJ1Y3R1cmVFcnJvciwgeyBlcnJvciB9KSwgJFs0XSA9IGVycm9yLCAkWzVdID0gdDYyKSA6IHQ2MiA9ICRbNV0sIHQ2MjtcbiAgfVxuICBjb25zdCB0NiA9IHNvdXJjZSB8fCBmaXJzdFNvdXJjZS5uYW1lO1xuICBsZXQgdDcsIHQ4O1xuICAkWzZdID09PSAvKiBAX19QVVJFX18gKi8gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDcgPSAvKiBAX19QVVJFX18gKi8ganN4KFN0cnVjdHVyZVRvb2wsIHsgb25QYW5lQ2hhbmdlOiBzZXRBY3RpdmVQYW5lcyB9KSwgdDggPSAvKiBAX19QVVJFX18gKi8ganN4KEludGVudFJlc29sdmVyLCB7fSksICRbNl0gPSB0NywgJFs3XSA9IHQ4KSA6ICh0NyA9ICRbNl0sIHQ4ID0gJFs3XSk7XG4gIGxldCB0OTtcbiAgJFs4XSAhPT0gZGVmYXVsdERvY3VtZW50Tm9kZSB8fCAkWzldICE9PSBzdHJ1Y3R1cmUgPyAodDkgPSAvKiBAX19QVVJFX18gKi8ganN4cyhTdHJ1Y3R1cmVUb29sUHJvdmlkZXIsIHsgZGVmYXVsdERvY3VtZW50Tm9kZSwgc3RydWN0dXJlLCBjaGlsZHJlbjogW1xuICAgIHQ3LFxuICAgIHQ4XG4gIF0gfSksICRbOF0gPSBkZWZhdWx0RG9jdW1lbnROb2RlLCAkWzldID0gc3RydWN0dXJlLCAkWzEwXSA9IHQ5KSA6IHQ5ID0gJFsxMF07XG4gIGxldCB0MTA7XG4gIHJldHVybiAkWzExXSAhPT0gdDYgfHwgJFsxMl0gIT09IHQ5ID8gKHQxMCA9IC8qIEBfX1BVUkVfXyAqLyBqc3goRXJyb3JCb3VuZGFyeSwgeyBvbkNhdGNoOiBzZXRFcnJvciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goU291cmNlUHJvdmlkZXIsIHsgbmFtZTogdDYsIGNoaWxkcmVuOiB0OSB9KSB9KSwgJFsxMV0gPSB0NiwgJFsxMl0gPSB0OSwgJFsxM10gPSB0MTApIDogdDEwID0gJFsxM10sIHQxMDtcbn1cbmZ1bmN0aW9uIF90ZW1wMigpIHtcbiAgcmV0dXJuIHNldEFjdGl2ZVBhbmVzKFtdKSwgX3RlbXA7XG59XG5mdW5jdGlvbiBfdGVtcCgpIHtcbiAgcmV0dXJuIHNldEFjdGl2ZVBhbmVzKFtdKTtcbn1cbmV4cG9ydCB7XG4gIFN0cnVjdHVyZVRvb2xCb3VuZGFyeSBhcyBkZWZhdWx0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/index3.js\n"));

/***/ })

}]);